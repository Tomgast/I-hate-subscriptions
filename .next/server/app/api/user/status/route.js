/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/user/status/route";
exports.ids = ["app/api/user/status/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Fstatus%2Froute&page=%2Fapi%2Fuser%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fstatus%2Froute.ts&appDir=C%3A%5CUsers%5CGebruiker%5CDocuments%5CGitHub%5CI-hate-subscriptions%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CGebruiker%5CDocuments%5CGitHub%5CI-hate-subscriptions&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Fstatus%2Froute&page=%2Fapi%2Fuser%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fstatus%2Froute.ts&appDir=C%3A%5CUsers%5CGebruiker%5CDocuments%5CGitHub%5CI-hate-subscriptions%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CGebruiker%5CDocuments%5CGitHub%5CI-hate-subscriptions&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Gebruiker_Documents_GitHub_I_hate_subscriptions_src_app_api_user_status_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/user/status/route.ts */ \"(rsc)/./src/app/api/user/status/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/user/status/route\",\n        pathname: \"/api/user/status\",\n        filename: \"route\",\n        bundlePath: \"app/api/user/status/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Gebruiker\\\\Documents\\\\GitHub\\\\I-hate-subscriptions\\\\src\\\\app\\\\api\\\\user\\\\status\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Gebruiker_Documents_GitHub_I_hate_subscriptions_src_app_api_user_status_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/user/status/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1c2VyJTJGc3RhdHVzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ1c2VyJTJGc3RhdHVzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdXNlciUyRnN0YXR1cyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNHZWJydWlrZXIlNUNEb2N1bWVudHMlNUNHaXRIdWIlNUNJLWhhdGUtc3Vic2NyaXB0aW9ucyU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDR2VicnVpa2VyJTVDRG9jdW1lbnRzJTVDR2l0SHViJTVDSS1oYXRlLXN1YnNjcmlwdGlvbnMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ29EO0FBQ2pJO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FzaGNvbnRyb2wvPzliNmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcR2VicnVpa2VyXFxcXERvY3VtZW50c1xcXFxHaXRIdWJcXFxcSS1oYXRlLXN1YnNjcmlwdGlvbnNcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcdXNlclxcXFxzdGF0dXNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VzZXIvc3RhdHVzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXNlci9zdGF0dXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3VzZXIvc3RhdHVzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcR2VicnVpa2VyXFxcXERvY3VtZW50c1xcXFxHaXRIdWJcXFxcSS1oYXRlLXN1YnNjcmlwdGlvbnNcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcdXNlclxcXFxzdGF0dXNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3VzZXIvc3RhdHVzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Fstatus%2Froute&page=%2Fapi%2Fuser%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fstatus%2Froute.ts&appDir=C%3A%5CUsers%5CGebruiker%5CDocuments%5CGitHub%5CI-hate-subscriptions%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CGebruiker%5CDocuments%5CGitHub%5CI-hate-subscriptions&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/user/status/route.ts":
/*!******************************************!*\
  !*** ./src/app/api/user/status/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_database_adapter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/database/adapter */ \"(rsc)/./src/lib/database/adapter.ts\");\n\n\n\n\nasync function GET(request) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session?.user?.email) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const userEmail = session.user.email;\n        // Get the latest user status from the MySQL database\n        const userProfile = await _lib_database_adapter__WEBPACK_IMPORTED_MODULE_3__.dbAdapter.getUserByEmail(userEmail);\n        if (!userProfile) {\n            console.error(\"User profile not found for email:\", userEmail);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                isPaid: false,\n                error: \"User profile not found\"\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            isPaid: userProfile.is_paid || false,\n            paymentDate: userProfile.updated_at,\n            email: userEmail,\n            userId: userProfile.id,\n            name: userProfile.name\n        });\n    } catch (error) {\n        console.error(\"Get user status error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            isPaid: false,\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS91c2VyL3N0YXR1cy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBdUQ7QUFDWDtBQUNKO0FBQ1U7QUFFM0MsZUFBZUksSUFBSUMsT0FBb0I7SUFDNUMsSUFBSTtRQUNGLE1BQU1DLFVBQVUsTUFBTUwsMkRBQWdCQSxDQUFDQyxrREFBV0E7UUFFbEQsSUFBSSxDQUFDSSxTQUFTQyxNQUFNQyxPQUFPO1lBQ3pCLE9BQU9SLHFEQUFZQSxDQUFDUyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBZSxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDcEU7UUFFQSxNQUFNQyxZQUFZTixRQUFRQyxJQUFJLENBQUNDLEtBQUs7UUFFcEMscURBQXFEO1FBQ3JELE1BQU1LLGNBQWMsTUFBTVYsNERBQVNBLENBQUNXLGNBQWMsQ0FBQ0Y7UUFFbkQsSUFBSSxDQUFDQyxhQUFhO1lBQ2hCRSxRQUFRTCxLQUFLLENBQUMscUNBQXFDRTtZQUNuRCxPQUFPWixxREFBWUEsQ0FBQ1MsSUFBSSxDQUFDO2dCQUN2Qk8sUUFBUTtnQkFDUk4sT0FBTztZQUNUO1FBQ0Y7UUFFQSxPQUFPVixxREFBWUEsQ0FBQ1MsSUFBSSxDQUFDO1lBQ3ZCTyxRQUFRSCxZQUFZSSxPQUFPLElBQUk7WUFDL0JDLGFBQWFMLFlBQVlNLFVBQVU7WUFDbkNYLE9BQU9JO1lBQ1BRLFFBQVFQLFlBQVlRLEVBQUU7WUFDdEJDLE1BQU1ULFlBQVlTLElBQUk7UUFDeEI7SUFDRixFQUFFLE9BQU9aLE9BQU87UUFDZEssUUFBUUwsS0FBSyxDQUFDLDBCQUEwQkE7UUFDeEMsT0FBT1YscURBQVlBLENBQUNTLElBQUksQ0FBQztZQUN2Qk8sUUFBUTtZQUNSTixPQUFPO1FBQ1QsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhc2hjb250cm9sLy4vc3JjL2FwcC9hcGkvdXNlci9zdGF0dXMvcm91dGUudHM/YWVlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoJ1xuaW1wb3J0IHsgYXV0aE9wdGlvbnMgfSBmcm9tICdAL2xpYi9hdXRoJ1xuaW1wb3J0IHsgZGJBZGFwdGVyIH0gZnJvbSAnQC9saWIvZGF0YWJhc2UvYWRhcHRlcidcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKVxuICAgIFxuICAgIGlmICghc2Vzc2lvbj8udXNlcj8uZW1haWwpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuXG4gICAgY29uc3QgdXNlckVtYWlsID0gc2Vzc2lvbi51c2VyLmVtYWlsXG4gICAgXG4gICAgLy8gR2V0IHRoZSBsYXRlc3QgdXNlciBzdGF0dXMgZnJvbSB0aGUgTXlTUUwgZGF0YWJhc2VcbiAgICBjb25zdCB1c2VyUHJvZmlsZSA9IGF3YWl0IGRiQWRhcHRlci5nZXRVc2VyQnlFbWFpbCh1c2VyRW1haWwpXG4gICAgXG4gICAgaWYgKCF1c2VyUHJvZmlsZSkge1xuICAgICAgY29uc29sZS5lcnJvcignVXNlciBwcm9maWxlIG5vdCBmb3VuZCBmb3IgZW1haWw6JywgdXNlckVtYWlsKVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIGlzUGFpZDogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnVXNlciBwcm9maWxlIG5vdCBmb3VuZCdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIGlzUGFpZDogdXNlclByb2ZpbGUuaXNfcGFpZCB8fCBmYWxzZSxcbiAgICAgIHBheW1lbnREYXRlOiB1c2VyUHJvZmlsZS51cGRhdGVkX2F0LFxuICAgICAgZW1haWw6IHVzZXJFbWFpbCxcbiAgICAgIHVzZXJJZDogdXNlclByb2ZpbGUuaWQsXG4gICAgICBuYW1lOiB1c2VyUHJvZmlsZS5uYW1lXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdHZXQgdXNlciBzdGF0dXMgZXJyb3I6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBpc1BhaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIFxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsImRiQWRhcHRlciIsIkdFVCIsInJlcXVlc3QiLCJzZXNzaW9uIiwidXNlciIsImVtYWlsIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwidXNlckVtYWlsIiwidXNlclByb2ZpbGUiLCJnZXRVc2VyQnlFbWFpbCIsImNvbnNvbGUiLCJpc1BhaWQiLCJpc19wYWlkIiwicGF5bWVudERhdGUiLCJ1cGRhdGVkX2F0IiwidXNlcklkIiwiaWQiLCJuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/user/status/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   canAccessPremiumFeatures: () => (/* binding */ canAccessPremiumFeatures),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   isPremiumUser: () => (/* binding */ isPremiumUser),\n/* harmony export */   updateUserPaymentStatus: () => (/* binding */ updateUserPaymentStatus)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var _lib_database_adapter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/database/adapter */ \"(rsc)/./src/lib/database/adapter.ts\");\n\n\n\n\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID || \"\",\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\"\n        }),\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                },\n                name: {\n                    label: \"Name\",\n                    type: \"text\",\n                    optional: true\n                },\n                isSignUp: {\n                    label: \"Is Sign Up\",\n                    type: \"text\",\n                    optional: true\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null;\n                }\n                const isSignUp = credentials.isSignUp === \"true\";\n                if (isSignUp) {\n                    // Sign up logic with MySQL database\n                    // Check if user already exists\n                    const existingUser = await _lib_database_adapter__WEBPACK_IMPORTED_MODULE_3__.dbAdapter.getUserByEmail(credentials.email);\n                    if (existingUser) {\n                        throw new Error(\"User already exists\");\n                    }\n                    // Hash password\n                    const hashedPassword = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_2__.hash)(credentials.password, 12);\n                    // Create user in MySQL database\n                    const newUser = await _lib_database_adapter__WEBPACK_IMPORTED_MODULE_3__.dbAdapter.createUser({\n                        email: credentials.email,\n                        name: credentials.name || credentials.email.split(\"@\")[0],\n                        is_paid: false\n                    });\n                    // Create default user preferences\n                    await _lib_database_adapter__WEBPACK_IMPORTED_MODULE_3__.dbAdapter.createUserPreferences(newUser.id, {});\n                    return {\n                        id: newUser.id,\n                        email: newUser.email,\n                        name: newUser.name || credentials.email.split(\"@\")[0],\n                        isPaid: false\n                    };\n                } else {\n                    // Sign in logic with MySQL database\n                    // Get user profile\n                    const userProfile = await _lib_database_adapter__WEBPACK_IMPORTED_MODULE_3__.dbAdapter.getUserByEmail(credentials.email);\n                    if (!userProfile) {\n                        throw new Error(\"No user found\");\n                    }\n                    // For now, we'll skip password verification since we're migrating from OAuth\n                    // In a full implementation, you'd store and verify hashed passwords\n                    // const isPasswordValid = await compare(credentials.password, userProfile.password)\n                    // if (!isPasswordValid) {\n                    //   throw new Error('Invalid credentials')\n                    // }\n                    return {\n                        id: userProfile.id,\n                        email: userProfile.email,\n                        name: userProfile.name || userProfile.email.split(\"@\")[0],\n                        isPaid: userProfile.is_paid || false\n                    };\n                }\n            }\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, user, account }) {\n            if (user && \"isPaid\" in user) {\n                token.isPaid = user.isPaid;\n            }\n            // Handle Google OAuth with MySQL database\n            if (account?.provider === \"google\" && user) {\n                // Check if user exists, if not create them\n                const existingUser = await _lib_database_adapter__WEBPACK_IMPORTED_MODULE_3__.dbAdapter.getUserByEmail(user.email);\n                if (!existingUser) {\n                    // Create user in MySQL database for OAuth\n                    const newUser = await _lib_database_adapter__WEBPACK_IMPORTED_MODULE_3__.dbAdapter.createUser({\n                        email: user.email,\n                        name: user.name || user.email.split(\"@\")[0],\n                        image: user.image || undefined,\n                        is_paid: false\n                    });\n                    // Create default user preferences\n                    await _lib_database_adapter__WEBPACK_IMPORTED_MODULE_3__.dbAdapter.createUserPreferences(newUser.id, {});\n                    token.isPaid = false;\n                } else {\n                    token.isPaid = existingUser.is_paid || false;\n                }\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (session.user) {\n                session.user.id = token.sub;\n                session.user.isPaid = token.isPaid;\n            }\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/auth/signin\"\n    },\n    session: {\n        strategy: \"jwt\"\n    }\n};\n// Helper functions for user management with MySQL database\nasync function createUser(email, password, name) {\n    // Hash password\n    const hashedPassword = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_2__.hash)(password, 12);\n    // Create user in MySQL database\n    const newUser = await _lib_database_adapter__WEBPACK_IMPORTED_MODULE_3__.dbAdapter.createUser({\n        email,\n        name,\n        is_paid: false\n    });\n    // Create default user preferences\n    await _lib_database_adapter__WEBPACK_IMPORTED_MODULE_3__.dbAdapter.createUserPreferences(newUser.id, {});\n    return {\n        id: newUser.id,\n        email: newUser.email,\n        name: newUser.name || name,\n        isPaid: false,\n        createdAt: newUser.created_at\n    };\n}\nasync function getUserByEmail(email) {\n    const userProfile = await _lib_database_adapter__WEBPACK_IMPORTED_MODULE_3__.dbAdapter.getUserByEmail(email);\n    if (!userProfile) return null;\n    return {\n        id: userProfile.id,\n        email: userProfile.email,\n        name: userProfile.name || userProfile.email.split(\"@\")[0],\n        isPaid: userProfile.is_paid || false,\n        createdAt: userProfile.created_at\n    };\n}\nasync function updateUserPaymentStatus(userId, isPaid) {\n    await _lib_database_adapter__WEBPACK_IMPORTED_MODULE_3__.dbAdapter.updateUser(userId, {\n        is_paid: isPaid\n    });\n}\nfunction isPremiumUser(user) {\n    return user.isPaid;\n}\nfunction canAccessPremiumFeatures(user) {\n    return user.isPaid;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VTtJQUU1QyxnQ0FBZ0M7SUFDaEMsTUFBTVEsVUFBVSxNQUFNdEIsNERBQVNBLENBQUN1QixVQUFVLENBQUM7UUFDekNaO1FBQ0FGO1FBQ0FnQixTQUFTO0lBQ1g7SUFFQSxrQ0FBa0M7SUFDbEMsTUFBTXpCLDREQUFTQSxDQUFDMEIscUJBQXFCLENBQUNKLFFBQVFLLEVBQUUsRUFBRSxDQUFDO0lBRW5ELE9BQU87UUFDTEEsSUFBSUwsUUFBUUssRUFBRTtRQUNkaEIsT0FBT1csUUFBUVgsS0FBSztRQUNwQkYsTUFBTWEsUUFBUWIsSUFBSSxJQUFJQTtRQUN0Qm1CLFFBQVE7UUFDUmUsV0FBV3JCLFFBQVFzQixVQUFVO0lBQy9CO0FBQ0Y7QUFFTyxlQUFlekIsZUFBZVIsS0FBYTtJQUNoRCxNQUFNa0IsY0FBYyxNQUFNN0IsNERBQVNBLENBQUNtQixjQUFjLENBQUNSO0lBRW5ELElBQUksQ0FBQ2tCLGFBQWEsT0FBTztJQUV6QixPQUFPO1FBQ0xGLElBQUlFLFlBQVlGLEVBQUU7UUFDbEJoQixPQUFPa0IsWUFBWWxCLEtBQUs7UUFDeEJGLE1BQU1vQixZQUFZcEIsSUFBSSxJQUFJb0IsWUFBWWxCLEtBQUssQ0FBQ2EsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ3pESSxRQUFRQyxZQUFZSixPQUFPLElBQUk7UUFDL0JrQixXQUFXZCxZQUFZZSxVQUFVO0lBQ25DO0FBQ0Y7QUFFTyxlQUFlQyx3QkFBd0JDLE1BQWMsRUFBRWxCLE1BQWU7SUFDM0UsTUFBTTVCLDREQUFTQSxDQUFDK0MsVUFBVSxDQUFDRCxRQUFRO1FBQ2pDckIsU0FBU0c7SUFDWDtBQUNGO0FBRU8sU0FBU29CLGNBQWNmLElBQVU7SUFDdEMsT0FBT0EsS0FBS0wsTUFBTTtBQUNwQjtBQUVPLFNBQVNxQix5QkFBeUJoQixJQUFVO0lBQ2pELE9BQU9BLEtBQUtMLE1BQU07QUFDcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXNoY29udHJvbC8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBdXRoT3B0aW9ucyB9IGZyb20gJ25leHQtYXV0aCdcbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHMnXG5pbXBvcnQgR29vZ2xlUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9nb29nbGUnXG5pbXBvcnQgeyBjb21wYXJlLCBoYXNoIH0gZnJvbSAnYmNyeXB0anMnXG5pbXBvcnQgeyBkYkFkYXB0ZXIgfSBmcm9tICdAL2xpYi9kYXRhYmFzZS9hZGFwdGVyJ1xuXG4vLyBEYXRhYmFzZSB1c2VyIGludGVyZmFjZVxuaW50ZXJmYWNlIFVzZXIge1xuICBpZDogc3RyaW5nXG4gIGVtYWlsOiBzdHJpbmdcbiAgcGFzc3dvcmQ/OiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIGlzUGFpZDogYm9vbGVhblxuICBjcmVhdGVkQXQ6IHN0cmluZ1xufVxuXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnM6IE5leHRBdXRoT3B0aW9ucyA9IHtcbiAgcHJvdmlkZXJzOiBbXG4gICAgR29vZ2xlUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQgfHwgJycsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfU0VDUkVUIHx8ICcnLFxuICAgIH0pLFxuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogJ2NyZWRlbnRpYWxzJyxcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGVtYWlsOiB7IGxhYmVsOiAnRW1haWwnLCB0eXBlOiAnZW1haWwnIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiAnUGFzc3dvcmQnLCB0eXBlOiAncGFzc3dvcmQnIH0sXG4gICAgICAgIG5hbWU6IHsgbGFiZWw6ICdOYW1lJywgdHlwZTogJ3RleHQnLCBvcHRpb25hbDogdHJ1ZSB9LFxuICAgICAgICBpc1NpZ25VcDogeyBsYWJlbDogJ0lzIFNpZ24gVXAnLCB0eXBlOiAndGV4dCcsIG9wdGlvbmFsOiB0cnVlIH0sXG4gICAgICB9LFxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaXNTaWduVXAgPSBjcmVkZW50aWFscy5pc1NpZ25VcCA9PT0gJ3RydWUnXG5cbiAgICAgICAgaWYgKGlzU2lnblVwKSB7XG4gICAgICAgICAgLy8gU2lnbiB1cCBsb2dpYyB3aXRoIE15U1FMIGRhdGFiYXNlXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBhbHJlYWR5IGV4aXN0c1xuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGRiQWRhcHRlci5nZXRVc2VyQnlFbWFpbChjcmVkZW50aWFscy5lbWFpbClcbiAgICAgICAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgYWxyZWFkeSBleGlzdHMnKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEhhc2ggcGFzc3dvcmRcbiAgICAgICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGhhc2goY3JlZGVudGlhbHMucGFzc3dvcmQsIDEyKVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIENyZWF0ZSB1c2VyIGluIE15U1FMIGRhdGFiYXNlXG4gICAgICAgICAgY29uc3QgbmV3VXNlciA9IGF3YWl0IGRiQWRhcHRlci5jcmVhdGVVc2VyKHtcbiAgICAgICAgICAgIGVtYWlsOiBjcmVkZW50aWFscy5lbWFpbCxcbiAgICAgICAgICAgIG5hbWU6IGNyZWRlbnRpYWxzLm5hbWUgfHwgY3JlZGVudGlhbHMuZW1haWwuc3BsaXQoJ0AnKVswXSxcbiAgICAgICAgICAgIGlzX3BhaWQ6IGZhbHNlXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIC8vIENyZWF0ZSBkZWZhdWx0IHVzZXIgcHJlZmVyZW5jZXNcbiAgICAgICAgICBhd2FpdCBkYkFkYXB0ZXIuY3JlYXRlVXNlclByZWZlcmVuY2VzKG5ld1VzZXIuaWQsIHt9KVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBuZXdVc2VyLmlkLFxuICAgICAgICAgICAgZW1haWw6IG5ld1VzZXIuZW1haWwsXG4gICAgICAgICAgICBuYW1lOiBuZXdVc2VyLm5hbWUgfHwgY3JlZGVudGlhbHMuZW1haWwuc3BsaXQoJ0AnKVswXSxcbiAgICAgICAgICAgIGlzUGFpZDogZmFsc2UsXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNpZ24gaW4gbG9naWMgd2l0aCBNeVNRTCBkYXRhYmFzZVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEdldCB1c2VyIHByb2ZpbGVcbiAgICAgICAgICBjb25zdCB1c2VyUHJvZmlsZSA9IGF3YWl0IGRiQWRhcHRlci5nZXRVc2VyQnlFbWFpbChjcmVkZW50aWFscy5lbWFpbClcbiAgICAgICAgICBpZiAoIXVzZXJQcm9maWxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgZm91bmQnKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEZvciBub3csIHdlJ2xsIHNraXAgcGFzc3dvcmQgdmVyaWZpY2F0aW9uIHNpbmNlIHdlJ3JlIG1pZ3JhdGluZyBmcm9tIE9BdXRoXG4gICAgICAgICAgLy8gSW4gYSBmdWxsIGltcGxlbWVudGF0aW9uLCB5b3UnZCBzdG9yZSBhbmQgdmVyaWZ5IGhhc2hlZCBwYXNzd29yZHNcbiAgICAgICAgICAvLyBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCBjb21wYXJlKGNyZWRlbnRpYWxzLnBhc3N3b3JkLCB1c2VyUHJvZmlsZS5wYXNzd29yZClcbiAgICAgICAgICAvLyBpZiAoIWlzUGFzc3dvcmRWYWxpZCkge1xuICAgICAgICAgIC8vICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNyZWRlbnRpYWxzJylcbiAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHVzZXJQcm9maWxlLmlkLFxuICAgICAgICAgICAgZW1haWw6IHVzZXJQcm9maWxlLmVtYWlsLFxuICAgICAgICAgICAgbmFtZTogdXNlclByb2ZpbGUubmFtZSB8fCB1c2VyUHJvZmlsZS5lbWFpbC5zcGxpdCgnQCcpWzBdLFxuICAgICAgICAgICAgaXNQYWlkOiB1c2VyUHJvZmlsZS5pc19wYWlkIHx8IGZhbHNlLFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9KSxcbiAgXSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIsIGFjY291bnQgfSkge1xuICAgICAgaWYgKHVzZXIgJiYgJ2lzUGFpZCcgaW4gdXNlcikge1xuICAgICAgICB0b2tlbi5pc1BhaWQgPSB1c2VyLmlzUGFpZFxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBIYW5kbGUgR29vZ2xlIE9BdXRoIHdpdGggTXlTUUwgZGF0YWJhc2VcbiAgICAgIGlmIChhY2NvdW50Py5wcm92aWRlciA9PT0gJ2dvb2dsZScgJiYgdXNlcikge1xuICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGV4aXN0cywgaWYgbm90IGNyZWF0ZSB0aGVtXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGRiQWRhcHRlci5nZXRVc2VyQnlFbWFpbCh1c2VyLmVtYWlsISlcblxuICAgICAgICBpZiAoIWV4aXN0aW5nVXNlcikge1xuICAgICAgICAgIC8vIENyZWF0ZSB1c2VyIGluIE15U1FMIGRhdGFiYXNlIGZvciBPQXV0aFxuICAgICAgICAgIGNvbnN0IG5ld1VzZXIgPSBhd2FpdCBkYkFkYXB0ZXIuY3JlYXRlVXNlcih7XG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCEsXG4gICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUgfHwgdXNlci5lbWFpbCEuc3BsaXQoJ0AnKVswXSxcbiAgICAgICAgICAgIGltYWdlOiB1c2VyLmltYWdlIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGlzX3BhaWQ6IGZhbHNlXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIC8vIENyZWF0ZSBkZWZhdWx0IHVzZXIgcHJlZmVyZW5jZXNcbiAgICAgICAgICBhd2FpdCBkYkFkYXB0ZXIuY3JlYXRlVXNlclByZWZlcmVuY2VzKG5ld1VzZXIuaWQsIHt9KVxuICAgICAgICAgIFxuICAgICAgICAgIHRva2VuLmlzUGFpZCA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9rZW4uaXNQYWlkID0gZXhpc3RpbmdVc2VyLmlzX3BhaWQgfHwgZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdG9rZW5cbiAgICB9LFxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICBpZiAoc2Vzc2lvbi51c2VyKSB7XG4gICAgICAgIC8vIEFkZCBjdXN0b20gcHJvcGVydGllcyB0byBzZXNzaW9uXG4gICAgICAgIDsoc2Vzc2lvbi51c2VyIGFzIGFueSkuaWQgPSB0b2tlbi5zdWIhXG4gICAgICAgIDsoc2Vzc2lvbi51c2VyIGFzIGFueSkuaXNQYWlkID0gdG9rZW4uaXNQYWlkIGFzIGJvb2xlYW5cbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uXG4gICAgfSxcbiAgfSxcbiAgcGFnZXM6IHtcbiAgICBzaWduSW46ICcvYXV0aC9zaWduaW4nLFxuICB9LFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6ICdqd3QnLFxuICB9LFxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvciB1c2VyIG1hbmFnZW1lbnQgd2l0aCBNeVNRTCBkYXRhYmFzZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVzZXIoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgbmFtZTogc3RyaW5nKTogUHJvbWlzZTxVc2VyPiB7XG4gIC8vIEhhc2ggcGFzc3dvcmRcbiAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBoYXNoKHBhc3N3b3JkLCAxMilcbiAgXG4gIC8vIENyZWF0ZSB1c2VyIGluIE15U1FMIGRhdGFiYXNlXG4gIGNvbnN0IG5ld1VzZXIgPSBhd2FpdCBkYkFkYXB0ZXIuY3JlYXRlVXNlcih7XG4gICAgZW1haWwsXG4gICAgbmFtZSxcbiAgICBpc19wYWlkOiBmYWxzZVxuICB9KVxuXG4gIC8vIENyZWF0ZSBkZWZhdWx0IHVzZXIgcHJlZmVyZW5jZXNcbiAgYXdhaXQgZGJBZGFwdGVyLmNyZWF0ZVVzZXJQcmVmZXJlbmNlcyhuZXdVc2VyLmlkLCB7fSlcblxuICByZXR1cm4ge1xuICAgIGlkOiBuZXdVc2VyLmlkLFxuICAgIGVtYWlsOiBuZXdVc2VyLmVtYWlsLFxuICAgIG5hbWU6IG5ld1VzZXIubmFtZSB8fCBuYW1lLFxuICAgIGlzUGFpZDogZmFsc2UsXG4gICAgY3JlYXRlZEF0OiBuZXdVc2VyLmNyZWF0ZWRfYXQsXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gIGNvbnN0IHVzZXJQcm9maWxlID0gYXdhaXQgZGJBZGFwdGVyLmdldFVzZXJCeUVtYWlsKGVtYWlsKVxuICBcbiAgaWYgKCF1c2VyUHJvZmlsZSkgcmV0dXJuIG51bGxcblxuICByZXR1cm4ge1xuICAgIGlkOiB1c2VyUHJvZmlsZS5pZCxcbiAgICBlbWFpbDogdXNlclByb2ZpbGUuZW1haWwsXG4gICAgbmFtZTogdXNlclByb2ZpbGUubmFtZSB8fCB1c2VyUHJvZmlsZS5lbWFpbC5zcGxpdCgnQCcpWzBdLFxuICAgIGlzUGFpZDogdXNlclByb2ZpbGUuaXNfcGFpZCB8fCBmYWxzZSxcbiAgICBjcmVhdGVkQXQ6IHVzZXJQcm9maWxlLmNyZWF0ZWRfYXQsXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJQYXltZW50U3RhdHVzKHVzZXJJZDogc3RyaW5nLCBpc1BhaWQ6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgYXdhaXQgZGJBZGFwdGVyLnVwZGF0ZVVzZXIodXNlcklkLCB7XG4gICAgaXNfcGFpZDogaXNQYWlkXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ByZW1pdW1Vc2VyKHVzZXI6IFVzZXIpOiBib29sZWFuIHtcbiAgcmV0dXJuIHVzZXIuaXNQYWlkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYW5BY2Nlc3NQcmVtaXVtRmVhdHVyZXModXNlcjogVXNlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gdXNlci5pc1BhaWRcbn1cbiJdLCJuYW1lcyI6WyJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiR29vZ2xlUHJvdmlkZXIiLCJoYXNoIiwiZGJBZGFwdGVyIiwiYXV0aE9wdGlvbnMiLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwib3B0aW9uYWwiLCJpc1NpZ25VcCIsImF1dGhvcml6ZSIsImV4aXN0aW5nVXNlciIsImdldFVzZXJCeUVtYWlsIiwiRXJyb3IiLCJoYXNoZWRQYXNzd29yZCIsIm5ld1VzZXIiLCJjcmVhdGVVc2VyIiwic3BsaXQiLCJpc19wYWlkIiwiY3JlYXRlVXNlclByZWZlcmVuY2VzIiwiaWQiLCJpc1BhaWQiLCJ1c2VyUHJvZmlsZSIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwidXNlciIsImFjY291bnQiLCJwcm92aWRlciIsImltYWdlIiwidW5kZWZpbmVkIiwic2Vzc2lvbiIsInN1YiIsInBhZ2VzIiwic2lnbkluIiwic3RyYXRlZ3kiLCJjcmVhdGVkQXQiLCJjcmVhdGVkX2F0IiwidXBkYXRlVXNlclBheW1lbnRTdGF0dXMiLCJ1c2VySWQiLCJ1cGRhdGVVc2VyIiwiaXNQcmVtaXVtVXNlciIsImNhbkFjY2Vzc1ByZW1pdW1GZWF0dXJlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/database/adapter.ts":
/*!*************************************!*\
  !*** ./src/lib/database/adapter.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DatabaseAdapter: () => (/* binding */ DatabaseAdapter),\n/* harmony export */   dbAdapter: () => (/* binding */ dbAdapter)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"(rsc)/./src/lib/database/config.ts\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm/v4.js\");\n// Database Adapter Service - Replaces Supabase with Plesk MySQL\n// Provides the same interface as Supabase for seamless migration\n\n\nclass DatabaseAdapter {\n    static getInstance() {\n        if (!DatabaseAdapter.instance) {\n            DatabaseAdapter.instance = new DatabaseAdapter();\n        }\n        return DatabaseAdapter.instance;\n    }\n    // User Management\n    async createUser(userData) {\n        const id = (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const now = new Date().toISOString();\n        await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.query(`INSERT INTO users (id, email, name, image, is_paid, created_at, updated_at) \n       VALUES (?, ?, ?, ?, ?, ?, ?)`, [\n            id,\n            userData.email,\n            userData.name,\n            userData.image,\n            userData.is_paid,\n            now,\n            now\n        ]);\n        return {\n            id,\n            ...userData,\n            created_at: now,\n            updated_at: now\n        };\n    }\n    async getUserById(id) {\n        return await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.queryOne(\"SELECT * FROM users WHERE id = ?\", [\n            id\n        ]);\n    }\n    async getUserByEmail(email) {\n        return await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.queryOne(\"SELECT * FROM users WHERE email = ?\", [\n            email\n        ]);\n    }\n    async updateUser(id, updates) {\n        const setClause = Object.keys(updates).map((key)=>`${key} = ?`).join(\", \");\n        const values = [\n            ...Object.values(updates),\n            new Date().toISOString(),\n            id\n        ];\n        await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.query(`UPDATE users SET ${setClause}, updated_at = ? WHERE id = ?`, values);\n        return await this.getUserById(id);\n    }\n    async deleteUser(id) {\n        const result = await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.query(\"DELETE FROM users WHERE id = ?\", [\n            id\n        ]);\n        return result.affectedRows > 0;\n    }\n    // Subscription Management\n    async createSubscription(subscriptionData) {\n        const id = (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const now = new Date().toISOString();\n        await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.query(`INSERT INTO subscriptions (id, user_id, name, amount, currency, billing_cycle, \n       next_billing_date, status, category, description, website_url, cancel_url, created_at, updated_at) \n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, [\n            id,\n            subscriptionData.user_id,\n            subscriptionData.name,\n            subscriptionData.amount,\n            subscriptionData.currency,\n            subscriptionData.billing_cycle,\n            subscriptionData.next_billing_date,\n            subscriptionData.status,\n            subscriptionData.category,\n            subscriptionData.description,\n            subscriptionData.website_url,\n            subscriptionData.cancel_url,\n            now,\n            now\n        ]);\n        return {\n            id,\n            ...subscriptionData,\n            created_at: now,\n            updated_at: now\n        };\n    }\n    async getSubscriptionsByUserId(userId) {\n        return await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.query(\"SELECT * FROM subscriptions WHERE user_id = ? ORDER BY created_at DESC\", [\n            userId\n        ]);\n    }\n    async getSubscriptionById(id) {\n        return await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.queryOne(\"SELECT * FROM subscriptions WHERE id = ?\", [\n            id\n        ]);\n    }\n    async updateSubscription(id, updates) {\n        const setClause = Object.keys(updates).map((key)=>`${key} = ?`).join(\", \");\n        const values = [\n            ...Object.values(updates),\n            new Date().toISOString(),\n            id\n        ];\n        await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.query(`UPDATE subscriptions SET ${setClause}, updated_at = ? WHERE id = ?`, values);\n        return await this.getSubscriptionById(id);\n    }\n    async deleteSubscription(id) {\n        const result = await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.query(\"DELETE FROM subscriptions WHERE id = ?\", [\n            id\n        ]);\n        return result.affectedRows > 0;\n    }\n    async getActiveSubscriptions() {\n        return await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.query(\"SELECT * FROM subscriptions WHERE status = 'active' ORDER BY next_billing_date ASC\");\n    }\n    async getSubscriptionsDueForReminder(days) {\n        return await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.query(`SELECT s.*, u.email, u.name as user_name \n       FROM subscriptions s \n       JOIN users u ON s.user_id = u.id \n       WHERE s.status = 'active' \n       AND s.next_billing_date = DATE_ADD(CURDATE(), INTERVAL ? DAY)`, [\n            days\n        ]);\n    }\n    // User Preferences Management\n    async createUserPreferences(userId, preferences) {\n        const now = new Date().toISOString();\n        const defaultPrefs = {\n            reminder_days: [\n                1,\n                3,\n                7\n            ],\n            reminder_frequency: \"once\",\n            preferred_time: \"09:00:00\",\n            email_welcome: true,\n            email_upgrade: true,\n            email_bank_scan: true,\n            email_reminders: true,\n            ...preferences\n        };\n        await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.query(`INSERT INTO user_preferences (user_id, reminder_days, reminder_frequency, preferred_time,\n       email_welcome, email_upgrade, email_bank_scan, email_reminders, created_at, updated_at)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, [\n            userId,\n            JSON.stringify(defaultPrefs.reminder_days),\n            defaultPrefs.reminder_frequency,\n            defaultPrefs.preferred_time,\n            defaultPrefs.email_welcome,\n            defaultPrefs.email_upgrade,\n            defaultPrefs.email_bank_scan,\n            defaultPrefs.email_reminders,\n            now,\n            now\n        ]);\n        const result = await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.queryOne(\"SELECT * FROM user_preferences WHERE user_id = ?\", [\n            userId\n        ]);\n        if (result) {\n            result.reminder_days = JSON.parse(result.reminder_days);\n        }\n        return result;\n    }\n    async getUserPreferences(userId) {\n        const result = await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.queryOne(\"SELECT * FROM user_preferences WHERE user_id = ?\", [\n            userId\n        ]);\n        if (result) {\n            result.reminder_days = JSON.parse(result.reminder_days);\n        }\n        return result;\n    }\n    async updateUserPreferences(userId, updates) {\n        const updateData = {\n            ...updates\n        };\n        if (updateData.reminder_days) {\n            updateData.reminder_days = JSON.stringify(updateData.reminder_days);\n        }\n        const setClause = Object.keys(updateData).map((key)=>`${key} = ?`).join(\", \");\n        const values = [\n            ...Object.values(updateData),\n            new Date().toISOString(),\n            userId\n        ];\n        await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.query(`UPDATE user_preferences SET ${setClause}, updated_at = ? WHERE user_id = ?`, values);\n        return await this.getUserPreferences(userId);\n    }\n    // Reminder Logs Management\n    async createReminderLog(logData) {\n        const now = new Date().toISOString();\n        const result = await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.query(`INSERT INTO reminder_logs (user_id, subscription_id, days_before_renewal, email_sent, error_message, sent_at)\n       VALUES (?, ?, ?, ?, ?, ?)`, [\n            logData.user_id,\n            logData.subscription_id,\n            logData.days_before_renewal,\n            logData.email_sent,\n            logData.error_message,\n            now\n        ]);\n        return {\n            id: result.insertId,\n            ...logData,\n            sent_at: now\n        };\n    }\n    async getReminderLogs(userId, limit = 50) {\n        return await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.query(`SELECT rl.*, s.name as subscription_name \n       FROM reminder_logs rl \n       JOIN subscriptions s ON rl.subscription_id = s.id \n       WHERE rl.user_id = ? \n       ORDER BY rl.sent_at DESC \n       LIMIT ?`, [\n            userId,\n            limit\n        ]);\n    }\n    async cleanupOldReminderLogs(daysOld = 90) {\n        const result = await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.query(\"DELETE FROM reminder_logs WHERE sent_at < DATE_SUB(NOW(), INTERVAL ? DAY)\", [\n            daysOld\n        ]);\n        return result.affectedRows;\n    }\n    // Analytics and Statistics\n    async getUserStats(userId) {\n        const stats = await _config__WEBPACK_IMPORTED_MODULE_0__.databaseService.queryOne(`SELECT \n        COUNT(*) as totalSubscriptions,\n        SUM(CASE WHEN status = 'active' THEN 1 ELSE 0 END) as activeSubscriptions,\n        SUM(CASE WHEN status = 'active' AND billing_cycle = 'monthly' THEN amount ELSE 0 END) as monthlyTotal,\n        SUM(CASE WHEN status = 'active' AND billing_cycle = 'yearly' THEN amount ELSE 0 END) as yearlyTotal,\n        AVG(CASE WHEN status = 'active' AND billing_cycle = 'monthly' THEN amount ELSE NULL END) as avgMonthlySpend\n       FROM subscriptions \n       WHERE user_id = ?`, [\n            userId\n        ]);\n        return {\n            totalSubscriptions: stats?.totalSubscriptions || 0,\n            activeSubscriptions: stats?.activeSubscriptions || 0,\n            monthlyTotal: stats?.monthlyTotal || 0,\n            yearlyTotal: stats?.yearlyTotal || 0,\n            avgMonthlySpend: stats?.avgMonthlySpend || 0\n        };\n    }\n}\n// Singleton instance\nconst dbAdapter = DatabaseAdapter.getInstance();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RhdGFiYXNlL2FkYXB0ZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLGdFQUFnRTtBQUNoRSxpRUFBaUU7QUFFdkI7QUFDUDtBQXFENUIsTUFBTUc7SUFHWCxPQUFjQyxjQUErQjtRQUMzQyxJQUFJLENBQUNELGdCQUFnQkUsUUFBUSxFQUFFO1lBQzdCRixnQkFBZ0JFLFFBQVEsR0FBRyxJQUFJRjtRQUNqQztRQUNBLE9BQU9BLGdCQUFnQkUsUUFBUTtJQUNqQztJQUVBLGtCQUFrQjtJQUNsQixNQUFNQyxXQUFXQyxRQUF3RCxFQUFpQjtRQUN4RixNQUFNQyxLQUFLTixnREFBTUE7UUFDakIsTUFBTU8sTUFBTSxJQUFJQyxPQUFPQyxXQUFXO1FBRWxDLE1BQU1YLG9EQUFlQSxDQUFDWSxLQUFLLENBQ3pCLENBQUM7bUNBQzRCLENBQUMsRUFDOUI7WUFBQ0o7WUFBSUQsU0FBU00sS0FBSztZQUFFTixTQUFTTyxJQUFJO1lBQUVQLFNBQVNRLEtBQUs7WUFBRVIsU0FBU1MsT0FBTztZQUFFUDtZQUFLQTtTQUFJO1FBR2pGLE9BQU87WUFDTEQ7WUFDQSxHQUFHRCxRQUFRO1lBQ1hVLFlBQVlSO1lBQ1pTLFlBQVlUO1FBQ2Q7SUFDRjtJQUVBLE1BQU1VLFlBQVlYLEVBQVUsRUFBd0I7UUFDbEQsT0FBTyxNQUFNUixvREFBZUEsQ0FBQ29CLFFBQVEsQ0FDbkMsb0NBQ0E7WUFBQ1o7U0FBRztJQUVSO0lBRUEsTUFBTWEsZUFBZVIsS0FBYSxFQUF3QjtRQUN4RCxPQUFPLE1BQU1iLG9EQUFlQSxDQUFDb0IsUUFBUSxDQUNuQyx1Q0FDQTtZQUFDUDtTQUFNO0lBRVg7SUFFQSxNQUFNUyxXQUFXZCxFQUFVLEVBQUVlLE9BQWlELEVBQXdCO1FBQ3BHLE1BQU1DLFlBQVlDLE9BQU9DLElBQUksQ0FBQ0gsU0FBU0ksR0FBRyxDQUFDQyxDQUFBQSxNQUFPLENBQUMsRUFBRUEsSUFBSSxJQUFJLENBQUMsRUFBRUMsSUFBSSxDQUFDO1FBQ3JFLE1BQU1DLFNBQVM7ZUFBSUwsT0FBT0ssTUFBTSxDQUFDUDtZQUFVLElBQUliLE9BQU9DLFdBQVc7WUFBSUg7U0FBRztRQUV4RSxNQUFNUixvREFBZUEsQ0FBQ1ksS0FBSyxDQUN6QixDQUFDLGlCQUFpQixFQUFFWSxVQUFVLDZCQUE2QixDQUFDLEVBQzVETTtRQUdGLE9BQU8sTUFBTSxJQUFJLENBQUNYLFdBQVcsQ0FBQ1g7SUFDaEM7SUFFQSxNQUFNdUIsV0FBV3ZCLEVBQVUsRUFBb0I7UUFDN0MsTUFBTXdCLFNBQVMsTUFBTWhDLG9EQUFlQSxDQUFDWSxLQUFLLENBQ3hDLGtDQUNBO1lBQUNKO1NBQUc7UUFFTixPQUFPLE9BQWdCeUIsWUFBWSxHQUFHO0lBQ3hDO0lBRUEsMEJBQTBCO0lBQzFCLE1BQU1DLG1CQUFtQkMsZ0JBQXdFLEVBQXlCO1FBQ3hILE1BQU0zQixLQUFLTixnREFBTUE7UUFDakIsTUFBTU8sTUFBTSxJQUFJQyxPQUFPQyxXQUFXO1FBRWxDLE1BQU1YLG9EQUFlQSxDQUFDWSxLQUFLLENBQ3pCLENBQUM7O3dEQUVpRCxDQUFDLEVBQ25EO1lBQ0VKO1lBQUkyQixpQkFBaUJDLE9BQU87WUFBRUQsaUJBQWlCckIsSUFBSTtZQUFFcUIsaUJBQWlCRSxNQUFNO1lBQzVFRixpQkFBaUJHLFFBQVE7WUFBRUgsaUJBQWlCSSxhQUFhO1lBQUVKLGlCQUFpQkssaUJBQWlCO1lBQzdGTCxpQkFBaUJNLE1BQU07WUFBRU4saUJBQWlCTyxRQUFRO1lBQUVQLGlCQUFpQlEsV0FBVztZQUNoRlIsaUJBQWlCUyxXQUFXO1lBQUVULGlCQUFpQlUsVUFBVTtZQUFFcEM7WUFBS0E7U0FDakU7UUFHSCxPQUFPO1lBQ0xEO1lBQ0EsR0FBRzJCLGdCQUFnQjtZQUNuQmxCLFlBQVlSO1lBQ1pTLFlBQVlUO1FBQ2Q7SUFDRjtJQUVBLE1BQU1xQyx5QkFBeUJDLE1BQWMsRUFBMkI7UUFDdEUsT0FBTyxNQUFNL0Msb0RBQWVBLENBQUNZLEtBQUssQ0FDaEMsMEVBQ0E7WUFBQ21DO1NBQU87SUFFWjtJQUVBLE1BQU1DLG9CQUFvQnhDLEVBQVUsRUFBZ0M7UUFDbEUsT0FBTyxNQUFNUixvREFBZUEsQ0FBQ29CLFFBQVEsQ0FDbkMsNENBQ0E7WUFBQ1o7U0FBRztJQUVSO0lBRUEsTUFBTXlDLG1CQUFtQnpDLEVBQVUsRUFBRWUsT0FBeUQsRUFBZ0M7UUFDNUgsTUFBTUMsWUFBWUMsT0FBT0MsSUFBSSxDQUFDSCxTQUFTSSxHQUFHLENBQUNDLENBQUFBLE1BQU8sQ0FBQyxFQUFFQSxJQUFJLElBQUksQ0FBQyxFQUFFQyxJQUFJLENBQUM7UUFDckUsTUFBTUMsU0FBUztlQUFJTCxPQUFPSyxNQUFNLENBQUNQO1lBQVUsSUFBSWIsT0FBT0MsV0FBVztZQUFJSDtTQUFHO1FBRXhFLE1BQU1SLG9EQUFlQSxDQUFDWSxLQUFLLENBQ3pCLENBQUMseUJBQXlCLEVBQUVZLFVBQVUsNkJBQTZCLENBQUMsRUFDcEVNO1FBR0YsT0FBTyxNQUFNLElBQUksQ0FBQ2tCLG1CQUFtQixDQUFDeEM7SUFDeEM7SUFFQSxNQUFNMEMsbUJBQW1CMUMsRUFBVSxFQUFvQjtRQUNyRCxNQUFNd0IsU0FBUyxNQUFNaEMsb0RBQWVBLENBQUNZLEtBQUssQ0FDeEMsMENBQ0E7WUFBQ0o7U0FBRztRQUVOLE9BQU8sT0FBZ0J5QixZQUFZLEdBQUc7SUFDeEM7SUFFQSxNQUFNa0IseUJBQWtEO1FBQ3RELE9BQU8sTUFBTW5ELG9EQUFlQSxDQUFDWSxLQUFLLENBQ2hDO0lBRUo7SUFFQSxNQUFNd0MsK0JBQStCQyxJQUFZLEVBQTJCO1FBQzFFLE9BQU8sTUFBTXJELG9EQUFlQSxDQUFDWSxLQUFLLENBQ2hDLENBQUM7Ozs7b0VBSTZELENBQUMsRUFDL0Q7WUFBQ3lDO1NBQUs7SUFFVjtJQUVBLDhCQUE4QjtJQUM5QixNQUFNQyxzQkFBc0JQLE1BQWMsRUFBRVEsV0FBMkYsRUFBNEI7UUFDakssTUFBTTlDLE1BQU0sSUFBSUMsT0FBT0MsV0FBVztRQUNsQyxNQUFNNkMsZUFBZTtZQUNuQkMsZUFBZTtnQkFBQztnQkFBRztnQkFBRzthQUFFO1lBQ3hCQyxvQkFBb0I7WUFDcEJDLGdCQUFnQjtZQUNoQkMsZUFBZTtZQUNmQyxlQUFlO1lBQ2ZDLGlCQUFpQjtZQUNqQkMsaUJBQWlCO1lBQ2pCLEdBQUdSLFdBQVc7UUFDaEI7UUFFQSxNQUFNdkQsb0RBQWVBLENBQUNZLEtBQUssQ0FDekIsQ0FBQzs7NENBRXFDLENBQUMsRUFDdkM7WUFDRW1DO1lBQVFpQixLQUFLQyxTQUFTLENBQUNULGFBQWFDLGFBQWE7WUFBR0QsYUFBYUUsa0JBQWtCO1lBQ25GRixhQUFhRyxjQUFjO1lBQUVILGFBQWFJLGFBQWE7WUFBRUosYUFBYUssYUFBYTtZQUNuRkwsYUFBYU0sZUFBZTtZQUFFTixhQUFhTyxlQUFlO1lBQUV0RDtZQUFLQTtTQUNsRTtRQUdILE1BQU11QixTQUFTLE1BQU1oQyxvREFBZUEsQ0FBQ29CLFFBQVEsQ0FDM0Msb0RBQ0E7WUFBQzJCO1NBQU87UUFHVixJQUFJZixRQUFRO1lBQ1ZBLE9BQU95QixhQUFhLEdBQUdPLEtBQUtFLEtBQUssQ0FBQ2xDLE9BQU95QixhQUFhO1FBQ3hEO1FBRUEsT0FBT3pCO0lBQ1Q7SUFFQSxNQUFNbUMsbUJBQW1CcEIsTUFBYyxFQUFtQztRQUN4RSxNQUFNZixTQUFTLE1BQU1oQyxvREFBZUEsQ0FBQ29CLFFBQVEsQ0FDM0Msb0RBQ0E7WUFBQzJCO1NBQU87UUFHVixJQUFJZixRQUFRO1lBQ1ZBLE9BQU95QixhQUFhLEdBQUdPLEtBQUtFLEtBQUssQ0FBQ2xDLE9BQU95QixhQUFhO1FBQ3hEO1FBRUEsT0FBT3pCO0lBQ1Q7SUFFQSxNQUFNb0Msc0JBQXNCckIsTUFBYyxFQUFFeEIsT0FBd0UsRUFBbUM7UUFDckosTUFBTThDLGFBQWE7WUFBRSxHQUFHOUMsT0FBTztRQUFDO1FBQ2hDLElBQUk4QyxXQUFXWixhQUFhLEVBQUU7WUFDM0JZLFdBQW1CWixhQUFhLEdBQUdPLEtBQUtDLFNBQVMsQ0FBQ0ksV0FBV1osYUFBYTtRQUM3RTtRQUVBLE1BQU1qQyxZQUFZQyxPQUFPQyxJQUFJLENBQUMyQyxZQUFZMUMsR0FBRyxDQUFDQyxDQUFBQSxNQUFPLENBQUMsRUFBRUEsSUFBSSxJQUFJLENBQUMsRUFBRUMsSUFBSSxDQUFDO1FBQ3hFLE1BQU1DLFNBQVM7ZUFBSUwsT0FBT0ssTUFBTSxDQUFDdUM7WUFBYSxJQUFJM0QsT0FBT0MsV0FBVztZQUFJb0M7U0FBTztRQUUvRSxNQUFNL0Msb0RBQWVBLENBQUNZLEtBQUssQ0FDekIsQ0FBQyw0QkFBNEIsRUFBRVksVUFBVSxrQ0FBa0MsQ0FBQyxFQUM1RU07UUFHRixPQUFPLE1BQU0sSUFBSSxDQUFDcUMsa0JBQWtCLENBQUNwQjtJQUN2QztJQUVBLDJCQUEyQjtJQUMzQixNQUFNdUIsa0JBQWtCQyxPQUE0QyxFQUF3QjtRQUMxRixNQUFNOUQsTUFBTSxJQUFJQyxPQUFPQyxXQUFXO1FBRWxDLE1BQU1xQixTQUFTLE1BQU1oQyxvREFBZUEsQ0FBQ1ksS0FBSyxDQUN4QyxDQUFDO2dDQUN5QixDQUFDLEVBQzNCO1lBQUMyRCxRQUFRbkMsT0FBTztZQUFFbUMsUUFBUUMsZUFBZTtZQUFFRCxRQUFRRSxtQkFBbUI7WUFBRUYsUUFBUUcsVUFBVTtZQUFFSCxRQUFRSSxhQUFhO1lBQUVsRTtTQUFJO1FBR3pILE9BQU87WUFDTEQsSUFBSSxPQUFnQm9FLFFBQVE7WUFDNUIsR0FBR0wsT0FBTztZQUNWTSxTQUFTcEU7UUFDWDtJQUNGO0lBRUEsTUFBTXFFLGdCQUFnQi9CLE1BQWMsRUFBRWdDLFFBQVEsRUFBRSxFQUEwQjtRQUN4RSxPQUFPLE1BQU0vRSxvREFBZUEsQ0FBQ1ksS0FBSyxDQUNoQyxDQUFDOzs7OztjQUtPLENBQUMsRUFDVDtZQUFDbUM7WUFBUWdDO1NBQU07SUFFbkI7SUFFQSxNQUFNQyx1QkFBdUJDLFVBQVUsRUFBRSxFQUFtQjtRQUMxRCxNQUFNakQsU0FBUyxNQUFNaEMsb0RBQWVBLENBQUNZLEtBQUssQ0FDeEMsNkVBQ0E7WUFBQ3FFO1NBQVE7UUFFWCxPQUFPLE9BQWdCaEQsWUFBWTtJQUNyQztJQUVBLDJCQUEyQjtJQUMzQixNQUFNaUQsYUFBYW5DLE1BQWMsRUFNOUI7UUFDRCxNQUFNb0MsUUFBUSxNQUFNbkYsb0RBQWVBLENBQUNvQixRQUFRLENBQzFDLENBQUM7Ozs7Ozs7d0JBT2lCLENBQUMsRUFDbkI7WUFBQzJCO1NBQU87UUFHVixPQUFPO1lBQ0xxQyxvQkFBb0JELE9BQU9DLHNCQUFzQjtZQUNqREMscUJBQXFCRixPQUFPRSx1QkFBdUI7WUFDbkRDLGNBQWNILE9BQU9HLGdCQUFnQjtZQUNyQ0MsYUFBYUosT0FBT0ksZUFBZTtZQUNuQ0MsaUJBQWlCTCxPQUFPSyxtQkFBbUI7UUFDN0M7SUFDRjtBQUNGO0FBRUEscUJBQXFCO0FBQ2QsTUFBTUMsWUFBWXRGLGdCQUFnQkMsV0FBVyxHQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FzaGNvbnRyb2wvLi9zcmMvbGliL2RhdGFiYXNlL2FkYXB0ZXIudHM/NDBkZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEYXRhYmFzZSBBZGFwdGVyIFNlcnZpY2UgLSBSZXBsYWNlcyBTdXBhYmFzZSB3aXRoIFBsZXNrIE15U1FMXG4vLyBQcm92aWRlcyB0aGUgc2FtZSBpbnRlcmZhY2UgYXMgU3VwYWJhc2UgZm9yIHNlYW1sZXNzIG1pZ3JhdGlvblxuXG5pbXBvcnQgeyBkYXRhYmFzZVNlcnZpY2UgfSBmcm9tICcuL2NvbmZpZydcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnXG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlciB7XG4gIGlkOiBzdHJpbmdcbiAgZW1haWw6IHN0cmluZ1xuICBuYW1lPzogc3RyaW5nXG4gIGltYWdlPzogc3RyaW5nXG4gIGlzX3BhaWQ6IGJvb2xlYW5cbiAgY3JlYXRlZF9hdDogc3RyaW5nXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN1YnNjcmlwdGlvbiB7XG4gIGlkOiBzdHJpbmdcbiAgdXNlcl9pZDogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICBhbW91bnQ6IG51bWJlclxuICBjdXJyZW5jeTogc3RyaW5nXG4gIGJpbGxpbmdfY3ljbGU6ICdtb250aGx5JyB8ICd5ZWFybHknIHwgJ3dlZWtseScgfCAnZGFpbHknXG4gIG5leHRfYmlsbGluZ19kYXRlPzogc3RyaW5nXG4gIHN0YXR1czogJ2FjdGl2ZScgfCAnY2FuY2VsbGVkJyB8ICdwYXVzZWQnXG4gIGNhdGVnb3J5Pzogc3RyaW5nXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nXG4gIHdlYnNpdGVfdXJsPzogc3RyaW5nXG4gIGNhbmNlbF91cmw/OiBzdHJpbmdcbiAgY3JlYXRlZF9hdDogc3RyaW5nXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJQcmVmZXJlbmNlcyB7XG4gIGlkOiBudW1iZXJcbiAgdXNlcl9pZDogc3RyaW5nXG4gIHJlbWluZGVyX2RheXM6IG51bWJlcltdXG4gIHJlbWluZGVyX2ZyZXF1ZW5jeTogJ29uY2UnIHwgJ2RhaWx5JyB8ICd3ZWVrbHknXG4gIHByZWZlcnJlZF90aW1lOiBzdHJpbmdcbiAgZW1haWxfd2VsY29tZTogYm9vbGVhblxuICBlbWFpbF91cGdyYWRlOiBib29sZWFuXG4gIGVtYWlsX2Jhbmtfc2NhbjogYm9vbGVhblxuICBlbWFpbF9yZW1pbmRlcnM6IGJvb2xlYW5cbiAgY3JlYXRlZF9hdDogc3RyaW5nXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlbWluZGVyTG9nIHtcbiAgaWQ6IG51bWJlclxuICB1c2VyX2lkOiBzdHJpbmdcbiAgc3Vic2NyaXB0aW9uX2lkOiBzdHJpbmdcbiAgc2VudF9hdDogc3RyaW5nXG4gIGRheXNfYmVmb3JlX3JlbmV3YWw6IG51bWJlclxuICBlbWFpbF9zZW50OiBib29sZWFuXG4gIGVycm9yX21lc3NhZ2U/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGNsYXNzIERhdGFiYXNlQWRhcHRlciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBEYXRhYmFzZUFkYXB0ZXJcblxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IERhdGFiYXNlQWRhcHRlciB7XG4gICAgaWYgKCFEYXRhYmFzZUFkYXB0ZXIuaW5zdGFuY2UpIHtcbiAgICAgIERhdGFiYXNlQWRhcHRlci5pbnN0YW5jZSA9IG5ldyBEYXRhYmFzZUFkYXB0ZXIoKVxuICAgIH1cbiAgICByZXR1cm4gRGF0YWJhc2VBZGFwdGVyLmluc3RhbmNlXG4gIH1cblxuICAvLyBVc2VyIE1hbmFnZW1lbnRcbiAgYXN5bmMgY3JlYXRlVXNlcih1c2VyRGF0YTogT21pdDxVc2VyLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnIHwgJ3VwZGF0ZWRfYXQnPik6IFByb21pc2U8VXNlcj4ge1xuICAgIGNvbnN0IGlkID0gdXVpZHY0KClcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICBcbiAgICBhd2FpdCBkYXRhYmFzZVNlcnZpY2UucXVlcnkoXG4gICAgICBgSU5TRVJUIElOVE8gdXNlcnMgKGlkLCBlbWFpbCwgbmFtZSwgaW1hZ2UsIGlzX3BhaWQsIGNyZWF0ZWRfYXQsIHVwZGF0ZWRfYXQpIFxuICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPylgLFxuICAgICAgW2lkLCB1c2VyRGF0YS5lbWFpbCwgdXNlckRhdGEubmFtZSwgdXNlckRhdGEuaW1hZ2UsIHVzZXJEYXRhLmlzX3BhaWQsIG5vdywgbm93XVxuICAgIClcblxuICAgIHJldHVybiB7XG4gICAgICBpZCxcbiAgICAgIC4uLnVzZXJEYXRhLFxuICAgICAgY3JlYXRlZF9hdDogbm93LFxuICAgICAgdXBkYXRlZF9hdDogbm93XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VXNlckJ5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgICByZXR1cm4gYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLnF1ZXJ5T25lPFVzZXI+KFxuICAgICAgJ1NFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgaWQgPSA/JyxcbiAgICAgIFtpZF1cbiAgICApXG4gIH1cblxuICBhc3luYyBnZXRVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIHJldHVybiBhd2FpdCBkYXRhYmFzZVNlcnZpY2UucXVlcnlPbmU8VXNlcj4oXG4gICAgICAnU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSBlbWFpbCA9ID8nLFxuICAgICAgW2VtYWlsXVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVVzZXIoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxPbWl0PFVzZXIsICdpZCcgfCAnY3JlYXRlZF9hdCc+Pik6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgICBjb25zdCBzZXRDbGF1c2UgPSBPYmplY3Qua2V5cyh1cGRhdGVzKS5tYXAoa2V5ID0+IGAke2tleX0gPSA/YCkuam9pbignLCAnKVxuICAgIGNvbnN0IHZhbHVlcyA9IFsuLi5PYmplY3QudmFsdWVzKHVwZGF0ZXMpLCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGlkXVxuICAgIFxuICAgIGF3YWl0IGRhdGFiYXNlU2VydmljZS5xdWVyeShcbiAgICAgIGBVUERBVEUgdXNlcnMgU0VUICR7c2V0Q2xhdXNlfSwgdXBkYXRlZF9hdCA9ID8gV0hFUkUgaWQgPSA/YCxcbiAgICAgIHZhbHVlc1xuICAgIClcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldFVzZXJCeUlkKGlkKVxuICB9XG5cbiAgYXN5bmMgZGVsZXRlVXNlcihpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLnF1ZXJ5KFxuICAgICAgJ0RFTEVURSBGUk9NIHVzZXJzIFdIRVJFIGlkID0gPycsXG4gICAgICBbaWRdXG4gICAgKVxuICAgIHJldHVybiAocmVzdWx0IGFzIGFueSkuYWZmZWN0ZWRSb3dzID4gMFxuICB9XG5cbiAgLy8gU3Vic2NyaXB0aW9uIE1hbmFnZW1lbnRcbiAgYXN5bmMgY3JlYXRlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbkRhdGE6IE9taXQ8U3Vic2NyaXB0aW9uLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnIHwgJ3VwZGF0ZWRfYXQnPik6IFByb21pc2U8U3Vic2NyaXB0aW9uPiB7XG4gICAgY29uc3QgaWQgPSB1dWlkdjQoKVxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIFxuICAgIGF3YWl0IGRhdGFiYXNlU2VydmljZS5xdWVyeShcbiAgICAgIGBJTlNFUlQgSU5UTyBzdWJzY3JpcHRpb25zIChpZCwgdXNlcl9pZCwgbmFtZSwgYW1vdW50LCBjdXJyZW5jeSwgYmlsbGluZ19jeWNsZSwgXG4gICAgICAgbmV4dF9iaWxsaW5nX2RhdGUsIHN0YXR1cywgY2F0ZWdvcnksIGRlc2NyaXB0aW9uLCB3ZWJzaXRlX3VybCwgY2FuY2VsX3VybCwgY3JlYXRlZF9hdCwgdXBkYXRlZF9hdCkgXG4gICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KWAsXG4gICAgICBbXG4gICAgICAgIGlkLCBzdWJzY3JpcHRpb25EYXRhLnVzZXJfaWQsIHN1YnNjcmlwdGlvbkRhdGEubmFtZSwgc3Vic2NyaXB0aW9uRGF0YS5hbW91bnQsXG4gICAgICAgIHN1YnNjcmlwdGlvbkRhdGEuY3VycmVuY3ksIHN1YnNjcmlwdGlvbkRhdGEuYmlsbGluZ19jeWNsZSwgc3Vic2NyaXB0aW9uRGF0YS5uZXh0X2JpbGxpbmdfZGF0ZSxcbiAgICAgICAgc3Vic2NyaXB0aW9uRGF0YS5zdGF0dXMsIHN1YnNjcmlwdGlvbkRhdGEuY2F0ZWdvcnksIHN1YnNjcmlwdGlvbkRhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgIHN1YnNjcmlwdGlvbkRhdGEud2Vic2l0ZV91cmwsIHN1YnNjcmlwdGlvbkRhdGEuY2FuY2VsX3VybCwgbm93LCBub3dcbiAgICAgIF1cbiAgICApXG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQsXG4gICAgICAuLi5zdWJzY3JpcHRpb25EYXRhLFxuICAgICAgY3JlYXRlZF9hdDogbm93LFxuICAgICAgdXBkYXRlZF9hdDogbm93XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0U3Vic2NyaXB0aW9uc0J5VXNlcklkKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxTdWJzY3JpcHRpb25bXT4ge1xuICAgIHJldHVybiBhd2FpdCBkYXRhYmFzZVNlcnZpY2UucXVlcnk8U3Vic2NyaXB0aW9uPihcbiAgICAgICdTRUxFQ1QgKiBGUk9NIHN1YnNjcmlwdGlvbnMgV0hFUkUgdXNlcl9pZCA9ID8gT1JERVIgQlkgY3JlYXRlZF9hdCBERVNDJyxcbiAgICAgIFt1c2VySWRdXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgZ2V0U3Vic2NyaXB0aW9uQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxTdWJzY3JpcHRpb24gfCBudWxsPiB7XG4gICAgcmV0dXJuIGF3YWl0IGRhdGFiYXNlU2VydmljZS5xdWVyeU9uZTxTdWJzY3JpcHRpb24+KFxuICAgICAgJ1NFTEVDVCAqIEZST00gc3Vic2NyaXB0aW9ucyBXSEVSRSBpZCA9ID8nLFxuICAgICAgW2lkXVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVN1YnNjcmlwdGlvbihpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPE9taXQ8U3Vic2NyaXB0aW9uLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnPj4pOiBQcm9taXNlPFN1YnNjcmlwdGlvbiB8IG51bGw+IHtcbiAgICBjb25zdCBzZXRDbGF1c2UgPSBPYmplY3Qua2V5cyh1cGRhdGVzKS5tYXAoa2V5ID0+IGAke2tleX0gPSA/YCkuam9pbignLCAnKVxuICAgIGNvbnN0IHZhbHVlcyA9IFsuLi5PYmplY3QudmFsdWVzKHVwZGF0ZXMpLCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGlkXVxuICAgIFxuICAgIGF3YWl0IGRhdGFiYXNlU2VydmljZS5xdWVyeShcbiAgICAgIGBVUERBVEUgc3Vic2NyaXB0aW9ucyBTRVQgJHtzZXRDbGF1c2V9LCB1cGRhdGVkX2F0ID0gPyBXSEVSRSBpZCA9ID9gLFxuICAgICAgdmFsdWVzXG4gICAgKVxuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0U3Vic2NyaXB0aW9uQnlJZChpZClcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZVN1YnNjcmlwdGlvbihpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLnF1ZXJ5KFxuICAgICAgJ0RFTEVURSBGUk9NIHN1YnNjcmlwdGlvbnMgV0hFUkUgaWQgPSA/JyxcbiAgICAgIFtpZF1cbiAgICApXG4gICAgcmV0dXJuIChyZXN1bHQgYXMgYW55KS5hZmZlY3RlZFJvd3MgPiAwXG4gIH1cblxuICBhc3luYyBnZXRBY3RpdmVTdWJzY3JpcHRpb25zKCk6IFByb21pc2U8U3Vic2NyaXB0aW9uW10+IHtcbiAgICByZXR1cm4gYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLnF1ZXJ5PFN1YnNjcmlwdGlvbj4oXG4gICAgICBcIlNFTEVDVCAqIEZST00gc3Vic2NyaXB0aW9ucyBXSEVSRSBzdGF0dXMgPSAnYWN0aXZlJyBPUkRFUiBCWSBuZXh0X2JpbGxpbmdfZGF0ZSBBU0NcIlxuICAgIClcbiAgfVxuXG4gIGFzeW5jIGdldFN1YnNjcmlwdGlvbnNEdWVGb3JSZW1pbmRlcihkYXlzOiBudW1iZXIpOiBQcm9taXNlPFN1YnNjcmlwdGlvbltdPiB7XG4gICAgcmV0dXJuIGF3YWl0IGRhdGFiYXNlU2VydmljZS5xdWVyeTxTdWJzY3JpcHRpb24+KFxuICAgICAgYFNFTEVDVCBzLiosIHUuZW1haWwsIHUubmFtZSBhcyB1c2VyX25hbWUgXG4gICAgICAgRlJPTSBzdWJzY3JpcHRpb25zIHMgXG4gICAgICAgSk9JTiB1c2VycyB1IE9OIHMudXNlcl9pZCA9IHUuaWQgXG4gICAgICAgV0hFUkUgcy5zdGF0dXMgPSAnYWN0aXZlJyBcbiAgICAgICBBTkQgcy5uZXh0X2JpbGxpbmdfZGF0ZSA9IERBVEVfQUREKENVUkRBVEUoKSwgSU5URVJWQUwgPyBEQVkpYCxcbiAgICAgIFtkYXlzXVxuICAgIClcbiAgfVxuXG4gIC8vIFVzZXIgUHJlZmVyZW5jZXMgTWFuYWdlbWVudFxuICBhc3luYyBjcmVhdGVVc2VyUHJlZmVyZW5jZXModXNlcklkOiBzdHJpbmcsIHByZWZlcmVuY2VzOiBQYXJ0aWFsPE9taXQ8VXNlclByZWZlcmVuY2VzLCAnaWQnIHwgJ3VzZXJfaWQnIHwgJ2NyZWF0ZWRfYXQnIHwgJ3VwZGF0ZWRfYXQnPj4pOiBQcm9taXNlPFVzZXJQcmVmZXJlbmNlcz4ge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIGNvbnN0IGRlZmF1bHRQcmVmcyA9IHtcbiAgICAgIHJlbWluZGVyX2RheXM6IFsxLCAzLCA3XSxcbiAgICAgIHJlbWluZGVyX2ZyZXF1ZW5jeTogJ29uY2UnIGFzIGNvbnN0LFxuICAgICAgcHJlZmVycmVkX3RpbWU6ICcwOTowMDowMCcsXG4gICAgICBlbWFpbF93ZWxjb21lOiB0cnVlLFxuICAgICAgZW1haWxfdXBncmFkZTogdHJ1ZSxcbiAgICAgIGVtYWlsX2Jhbmtfc2NhbjogdHJ1ZSxcbiAgICAgIGVtYWlsX3JlbWluZGVyczogdHJ1ZSxcbiAgICAgIC4uLnByZWZlcmVuY2VzXG4gICAgfVxuXG4gICAgYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLnF1ZXJ5KFxuICAgICAgYElOU0VSVCBJTlRPIHVzZXJfcHJlZmVyZW5jZXMgKHVzZXJfaWQsIHJlbWluZGVyX2RheXMsIHJlbWluZGVyX2ZyZXF1ZW5jeSwgcHJlZmVycmVkX3RpbWUsXG4gICAgICAgZW1haWxfd2VsY29tZSwgZW1haWxfdXBncmFkZSwgZW1haWxfYmFua19zY2FuLCBlbWFpbF9yZW1pbmRlcnMsIGNyZWF0ZWRfYXQsIHVwZGF0ZWRfYXQpXG4gICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KWAsXG4gICAgICBbXG4gICAgICAgIHVzZXJJZCwgSlNPTi5zdHJpbmdpZnkoZGVmYXVsdFByZWZzLnJlbWluZGVyX2RheXMpLCBkZWZhdWx0UHJlZnMucmVtaW5kZXJfZnJlcXVlbmN5LFxuICAgICAgICBkZWZhdWx0UHJlZnMucHJlZmVycmVkX3RpbWUsIGRlZmF1bHRQcmVmcy5lbWFpbF93ZWxjb21lLCBkZWZhdWx0UHJlZnMuZW1haWxfdXBncmFkZSxcbiAgICAgICAgZGVmYXVsdFByZWZzLmVtYWlsX2Jhbmtfc2NhbiwgZGVmYXVsdFByZWZzLmVtYWlsX3JlbWluZGVycywgbm93LCBub3dcbiAgICAgIF1cbiAgICApXG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhYmFzZVNlcnZpY2UucXVlcnlPbmU8VXNlclByZWZlcmVuY2VzPihcbiAgICAgICdTRUxFQ1QgKiBGUk9NIHVzZXJfcHJlZmVyZW5jZXMgV0hFUkUgdXNlcl9pZCA9ID8nLFxuICAgICAgW3VzZXJJZF1cbiAgICApXG5cbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICByZXN1bHQucmVtaW5kZXJfZGF5cyA9IEpTT04ucGFyc2UocmVzdWx0LnJlbWluZGVyX2RheXMgYXMgYW55KVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQhXG4gIH1cblxuICBhc3luYyBnZXRVc2VyUHJlZmVyZW5jZXModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJQcmVmZXJlbmNlcyB8IG51bGw+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhYmFzZVNlcnZpY2UucXVlcnlPbmU8VXNlclByZWZlcmVuY2VzPihcbiAgICAgICdTRUxFQ1QgKiBGUk9NIHVzZXJfcHJlZmVyZW5jZXMgV0hFUkUgdXNlcl9pZCA9ID8nLFxuICAgICAgW3VzZXJJZF1cbiAgICApXG5cbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICByZXN1bHQucmVtaW5kZXJfZGF5cyA9IEpTT04ucGFyc2UocmVzdWx0LnJlbWluZGVyX2RheXMgYXMgYW55KVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVVzZXJQcmVmZXJlbmNlcyh1c2VySWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxPbWl0PFVzZXJQcmVmZXJlbmNlcywgJ2lkJyB8ICd1c2VyX2lkJyB8ICdjcmVhdGVkX2F0Jz4+KTogUHJvbWlzZTxVc2VyUHJlZmVyZW5jZXMgfCBudWxsPiB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHsgLi4udXBkYXRlcyB9XG4gICAgaWYgKHVwZGF0ZURhdGEucmVtaW5kZXJfZGF5cykge1xuICAgICAgKHVwZGF0ZURhdGEgYXMgYW55KS5yZW1pbmRlcl9kYXlzID0gSlNPTi5zdHJpbmdpZnkodXBkYXRlRGF0YS5yZW1pbmRlcl9kYXlzKVxuICAgIH1cblxuICAgIGNvbnN0IHNldENsYXVzZSA9IE9iamVjdC5rZXlzKHVwZGF0ZURhdGEpLm1hcChrZXkgPT4gYCR7a2V5fSA9ID9gKS5qb2luKCcsICcpXG4gICAgY29uc3QgdmFsdWVzID0gWy4uLk9iamVjdC52YWx1ZXModXBkYXRlRGF0YSksIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgdXNlcklkXVxuICAgIFxuICAgIGF3YWl0IGRhdGFiYXNlU2VydmljZS5xdWVyeShcbiAgICAgIGBVUERBVEUgdXNlcl9wcmVmZXJlbmNlcyBTRVQgJHtzZXRDbGF1c2V9LCB1cGRhdGVkX2F0ID0gPyBXSEVSRSB1c2VyX2lkID0gP2AsXG4gICAgICB2YWx1ZXNcbiAgICApXG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRVc2VyUHJlZmVyZW5jZXModXNlcklkKVxuICB9XG5cbiAgLy8gUmVtaW5kZXIgTG9ncyBNYW5hZ2VtZW50XG4gIGFzeW5jIGNyZWF0ZVJlbWluZGVyTG9nKGxvZ0RhdGE6IE9taXQ8UmVtaW5kZXJMb2csICdpZCcgfCAnc2VudF9hdCc+KTogUHJvbWlzZTxSZW1pbmRlckxvZz4ge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIFxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFiYXNlU2VydmljZS5xdWVyeShcbiAgICAgIGBJTlNFUlQgSU5UTyByZW1pbmRlcl9sb2dzICh1c2VyX2lkLCBzdWJzY3JpcHRpb25faWQsIGRheXNfYmVmb3JlX3JlbmV3YWwsIGVtYWlsX3NlbnQsIGVycm9yX21lc3NhZ2UsIHNlbnRfYXQpXG4gICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/KWAsXG4gICAgICBbbG9nRGF0YS51c2VyX2lkLCBsb2dEYXRhLnN1YnNjcmlwdGlvbl9pZCwgbG9nRGF0YS5kYXlzX2JlZm9yZV9yZW5ld2FsLCBsb2dEYXRhLmVtYWlsX3NlbnQsIGxvZ0RhdGEuZXJyb3JfbWVzc2FnZSwgbm93XVxuICAgIClcblxuICAgIHJldHVybiB7XG4gICAgICBpZDogKHJlc3VsdCBhcyBhbnkpLmluc2VydElkLFxuICAgICAgLi4ubG9nRGF0YSxcbiAgICAgIHNlbnRfYXQ6IG5vd1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFJlbWluZGVyTG9ncyh1c2VySWQ6IHN0cmluZywgbGltaXQgPSA1MCk6IFByb21pc2U8UmVtaW5kZXJMb2dbXT4ge1xuICAgIHJldHVybiBhd2FpdCBkYXRhYmFzZVNlcnZpY2UucXVlcnk8UmVtaW5kZXJMb2c+KFxuICAgICAgYFNFTEVDVCBybC4qLCBzLm5hbWUgYXMgc3Vic2NyaXB0aW9uX25hbWUgXG4gICAgICAgRlJPTSByZW1pbmRlcl9sb2dzIHJsIFxuICAgICAgIEpPSU4gc3Vic2NyaXB0aW9ucyBzIE9OIHJsLnN1YnNjcmlwdGlvbl9pZCA9IHMuaWQgXG4gICAgICAgV0hFUkUgcmwudXNlcl9pZCA9ID8gXG4gICAgICAgT1JERVIgQlkgcmwuc2VudF9hdCBERVNDIFxuICAgICAgIExJTUlUID9gLFxuICAgICAgW3VzZXJJZCwgbGltaXRdXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgY2xlYW51cE9sZFJlbWluZGVyTG9ncyhkYXlzT2xkID0gOTApOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFiYXNlU2VydmljZS5xdWVyeShcbiAgICAgICdERUxFVEUgRlJPTSByZW1pbmRlcl9sb2dzIFdIRVJFIHNlbnRfYXQgPCBEQVRFX1NVQihOT1coKSwgSU5URVJWQUwgPyBEQVkpJyxcbiAgICAgIFtkYXlzT2xkXVxuICAgIClcbiAgICByZXR1cm4gKHJlc3VsdCBhcyBhbnkpLmFmZmVjdGVkUm93c1xuICB9XG5cbiAgLy8gQW5hbHl0aWNzIGFuZCBTdGF0aXN0aWNzXG4gIGFzeW5jIGdldFVzZXJTdGF0cyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICAgIHRvdGFsU3Vic2NyaXB0aW9uczogbnVtYmVyXG4gICAgYWN0aXZlU3Vic2NyaXB0aW9uczogbnVtYmVyXG4gICAgbW9udGhseVRvdGFsOiBudW1iZXJcbiAgICB5ZWFybHlUb3RhbDogbnVtYmVyXG4gICAgYXZnTW9udGhseVNwZW5kOiBudW1iZXJcbiAgfT4ge1xuICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLnF1ZXJ5T25lPGFueT4oXG4gICAgICBgU0VMRUNUIFxuICAgICAgICBDT1VOVCgqKSBhcyB0b3RhbFN1YnNjcmlwdGlvbnMsXG4gICAgICAgIFNVTShDQVNFIFdIRU4gc3RhdHVzID0gJ2FjdGl2ZScgVEhFTiAxIEVMU0UgMCBFTkQpIGFzIGFjdGl2ZVN1YnNjcmlwdGlvbnMsXG4gICAgICAgIFNVTShDQVNFIFdIRU4gc3RhdHVzID0gJ2FjdGl2ZScgQU5EIGJpbGxpbmdfY3ljbGUgPSAnbW9udGhseScgVEhFTiBhbW91bnQgRUxTRSAwIEVORCkgYXMgbW9udGhseVRvdGFsLFxuICAgICAgICBTVU0oQ0FTRSBXSEVOIHN0YXR1cyA9ICdhY3RpdmUnIEFORCBiaWxsaW5nX2N5Y2xlID0gJ3llYXJseScgVEhFTiBhbW91bnQgRUxTRSAwIEVORCkgYXMgeWVhcmx5VG90YWwsXG4gICAgICAgIEFWRyhDQVNFIFdIRU4gc3RhdHVzID0gJ2FjdGl2ZScgQU5EIGJpbGxpbmdfY3ljbGUgPSAnbW9udGhseScgVEhFTiBhbW91bnQgRUxTRSBOVUxMIEVORCkgYXMgYXZnTW9udGhseVNwZW5kXG4gICAgICAgRlJPTSBzdWJzY3JpcHRpb25zIFxuICAgICAgIFdIRVJFIHVzZXJfaWQgPSA/YCxcbiAgICAgIFt1c2VySWRdXG4gICAgKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsU3Vic2NyaXB0aW9uczogc3RhdHM/LnRvdGFsU3Vic2NyaXB0aW9ucyB8fCAwLFxuICAgICAgYWN0aXZlU3Vic2NyaXB0aW9uczogc3RhdHM/LmFjdGl2ZVN1YnNjcmlwdGlvbnMgfHwgMCxcbiAgICAgIG1vbnRobHlUb3RhbDogc3RhdHM/Lm1vbnRobHlUb3RhbCB8fCAwLFxuICAgICAgeWVhcmx5VG90YWw6IHN0YXRzPy55ZWFybHlUb3RhbCB8fCAwLFxuICAgICAgYXZnTW9udGhseVNwZW5kOiBzdGF0cz8uYXZnTW9udGhseVNwZW5kIHx8IDBcbiAgICB9XG4gIH1cbn1cblxuLy8gU2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgZGJBZGFwdGVyID0gRGF0YWJhc2VBZGFwdGVyLmdldEluc3RhbmNlKClcbiJdLCJuYW1lcyI6WyJkYXRhYmFzZVNlcnZpY2UiLCJ2NCIsInV1aWR2NCIsIkRhdGFiYXNlQWRhcHRlciIsImdldEluc3RhbmNlIiwiaW5zdGFuY2UiLCJjcmVhdGVVc2VyIiwidXNlckRhdGEiLCJpZCIsIm5vdyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInF1ZXJ5IiwiZW1haWwiLCJuYW1lIiwiaW1hZ2UiLCJpc19wYWlkIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJnZXRVc2VyQnlJZCIsInF1ZXJ5T25lIiwiZ2V0VXNlckJ5RW1haWwiLCJ1cGRhdGVVc2VyIiwidXBkYXRlcyIsInNldENsYXVzZSIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJrZXkiLCJqb2luIiwidmFsdWVzIiwiZGVsZXRlVXNlciIsInJlc3VsdCIsImFmZmVjdGVkUm93cyIsImNyZWF0ZVN1YnNjcmlwdGlvbiIsInN1YnNjcmlwdGlvbkRhdGEiLCJ1c2VyX2lkIiwiYW1vdW50IiwiY3VycmVuY3kiLCJiaWxsaW5nX2N5Y2xlIiwibmV4dF9iaWxsaW5nX2RhdGUiLCJzdGF0dXMiLCJjYXRlZ29yeSIsImRlc2NyaXB0aW9uIiwid2Vic2l0ZV91cmwiLCJjYW5jZWxfdXJsIiwiZ2V0U3Vic2NyaXB0aW9uc0J5VXNlcklkIiwidXNlcklkIiwiZ2V0U3Vic2NyaXB0aW9uQnlJZCIsInVwZGF0ZVN1YnNjcmlwdGlvbiIsImRlbGV0ZVN1YnNjcmlwdGlvbiIsImdldEFjdGl2ZVN1YnNjcmlwdGlvbnMiLCJnZXRTdWJzY3JpcHRpb25zRHVlRm9yUmVtaW5kZXIiLCJkYXlzIiwiY3JlYXRlVXNlclByZWZlcmVuY2VzIiwicHJlZmVyZW5jZXMiLCJkZWZhdWx0UHJlZnMiLCJyZW1pbmRlcl9kYXlzIiwicmVtaW5kZXJfZnJlcXVlbmN5IiwicHJlZmVycmVkX3RpbWUiLCJlbWFpbF93ZWxjb21lIiwiZW1haWxfdXBncmFkZSIsImVtYWlsX2Jhbmtfc2NhbiIsImVtYWlsX3JlbWluZGVycyIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJzZSIsImdldFVzZXJQcmVmZXJlbmNlcyIsInVwZGF0ZVVzZXJQcmVmZXJlbmNlcyIsInVwZGF0ZURhdGEiLCJjcmVhdGVSZW1pbmRlckxvZyIsImxvZ0RhdGEiLCJzdWJzY3JpcHRpb25faWQiLCJkYXlzX2JlZm9yZV9yZW5ld2FsIiwiZW1haWxfc2VudCIsImVycm9yX21lc3NhZ2UiLCJpbnNlcnRJZCIsInNlbnRfYXQiLCJnZXRSZW1pbmRlckxvZ3MiLCJsaW1pdCIsImNsZWFudXBPbGRSZW1pbmRlckxvZ3MiLCJkYXlzT2xkIiwiZ2V0VXNlclN0YXRzIiwic3RhdHMiLCJ0b3RhbFN1YnNjcmlwdGlvbnMiLCJhY3RpdmVTdWJzY3JpcHRpb25zIiwibW9udGhseVRvdGFsIiwieWVhcmx5VG90YWwiLCJhdmdNb250aGx5U3BlbmQiLCJkYkFkYXB0ZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database/adapter.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/database/config.ts":
/*!************************************!*\
  !*** ./src/lib/database/config.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DatabaseService: () => (/* binding */ DatabaseService),\n/* harmony export */   databaseService: () => (/* binding */ databaseService)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n// Database Configuration for Plesk MySQL\n// Handles connection to Plesk hosting MySQL database\n\nclass DatabaseService {\n    constructor(){\n        this.pool = null;\n        this.config = this.getDatabaseConfig();\n        this.initializePool();\n    }\n    static getInstance() {\n        if (!DatabaseService.instance) {\n            DatabaseService.instance = new DatabaseService();\n        }\n        return DatabaseService.instance;\n    }\n    getDatabaseConfig() {\n        return {\n            host: process.env.DB_HOST || \"localhost\",\n            port: parseInt(process.env.DB_PORT || \"3306\"),\n            database: process.env.DB_NAME || \"\",\n            user: process.env.DB_USER || \"\",\n            password: process.env.DB_PASSWORD || \"\",\n            connectionLimit: 10,\n            acquireTimeout: 60000,\n            timeout: 60000,\n            reconnect: true\n        };\n    }\n    initializePool() {\n        try {\n            this.pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createPool({\n                host: this.config.host,\n                port: this.config.port,\n                database: this.config.database,\n                user: this.config.user,\n                password: this.config.password,\n                connectionLimit: this.config.connectionLimit,\n                acquireTimeout: this.config.acquireTimeout,\n                timeout: this.config.timeout,\n                reconnect: this.config.reconnect,\n                ssl: false,\n                charset: \"utf8mb4\"\n            });\n            console.log(\" MySQL connection pool initialized for Plesk database\");\n        } catch (error) {\n            console.error(\" Failed to initialize MySQL connection pool:\", error);\n            throw error;\n        }\n    }\n    async testConnection() {\n        if (!this.pool) {\n            console.error(\" Database pool not initialized\");\n            return false;\n        }\n        try {\n            const connection = await this.pool.getConnection();\n            await connection.ping();\n            connection.release();\n            console.log(\" Database connection test successful\");\n            return true;\n        } catch (error) {\n            console.error(\" Database connection test failed:\", error);\n            return false;\n        }\n    }\n    async query(sql, params) {\n        if (!this.pool) {\n            throw new Error(\"Database pool not initialized\");\n        }\n        try {\n            const [rows] = await this.pool.execute(sql, params);\n            return rows;\n        } catch (error) {\n            console.error(\" Database query failed:\", error);\n            console.error(\"SQL:\", sql);\n            console.error(\"Params:\", params);\n            throw error;\n        }\n    }\n    async queryOne(sql, params) {\n        const results = await this.query(sql, params);\n        return results.length > 0 ? results[0] : null;\n    }\n    async transaction(callback) {\n        if (!this.pool) {\n            throw new Error(\"Database pool not initialized\");\n        }\n        const connection = await this.pool.getConnection();\n        try {\n            await connection.beginTransaction();\n            const result = await callback(connection);\n            await connection.commit();\n            return result;\n        } catch (error) {\n            await connection.rollback();\n            throw error;\n        } finally{\n            connection.release();\n        }\n    }\n    async closePool() {\n        if (this.pool) {\n            await this.pool.end();\n            this.pool = null;\n            console.log(\" Database connection pool closed\");\n        }\n    }\n    // Helper method to create tables if they don't exist\n    async initializeTables() {\n        const createUsersTable = `\n      CREATE TABLE IF NOT EXISTS users (\n        id VARCHAR(255) PRIMARY KEY,\n        email VARCHAR(255) UNIQUE NOT NULL,\n        name VARCHAR(255),\n        image VARCHAR(500),\n        is_paid BOOLEAN DEFAULT FALSE,\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n        INDEX idx_email (email),\n        INDEX idx_is_paid (is_paid)\n      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n    `;\n        const createSubscriptionsTable = `\n      CREATE TABLE IF NOT EXISTS subscriptions (\n        id VARCHAR(255) PRIMARY KEY,\n        user_id VARCHAR(255) NOT NULL,\n        name VARCHAR(255) NOT NULL,\n        amount DECIMAL(10,2) NOT NULL,\n        currency VARCHAR(3) DEFAULT 'EUR',\n        billing_cycle ENUM('monthly', 'yearly', 'weekly', 'daily') DEFAULT 'monthly',\n        next_billing_date DATE,\n        status ENUM('active', 'cancelled', 'paused') DEFAULT 'active',\n        category VARCHAR(100),\n        description TEXT,\n        website_url VARCHAR(500),\n        cancel_url VARCHAR(500),\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n        FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\n        INDEX idx_user_id (user_id),\n        INDEX idx_status (status),\n        INDEX idx_next_billing_date (next_billing_date)\n      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n    `;\n        const createUserPreferencesTable = `\n      CREATE TABLE IF NOT EXISTS user_preferences (\n        id INT AUTO_INCREMENT PRIMARY KEY,\n        user_id VARCHAR(255) NOT NULL,\n        reminder_days JSON DEFAULT '[]',\n        reminder_frequency ENUM('once', 'daily', 'weekly') DEFAULT 'once',\n        preferred_time TIME DEFAULT '09:00:00',\n        email_welcome BOOLEAN DEFAULT TRUE,\n        email_upgrade BOOLEAN DEFAULT TRUE,\n        email_bank_scan BOOLEAN DEFAULT TRUE,\n        email_reminders BOOLEAN DEFAULT TRUE,\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n        UNIQUE KEY unique_user_prefs (user_id),\n        FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n    `;\n        const createReminderLogsTable = `\n      CREATE TABLE IF NOT EXISTS reminder_logs (\n        id INT AUTO_INCREMENT PRIMARY KEY,\n        user_id VARCHAR(255) NOT NULL,\n        subscription_id VARCHAR(255) NOT NULL,\n        sent_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n        days_before_renewal INT NOT NULL,\n        email_sent BOOLEAN DEFAULT FALSE,\n        error_message TEXT,\n        INDEX idx_user_id (user_id),\n        INDEX idx_subscription_id (subscription_id),\n        INDEX idx_sent_at (sent_at),\n        FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\n        FOREIGN KEY (subscription_id) REFERENCES subscriptions(id) ON DELETE CASCADE\n      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n    `;\n        try {\n            await this.query(createUsersTable);\n            await this.query(createSubscriptionsTable);\n            await this.query(createUserPreferencesTable);\n            await this.query(createReminderLogsTable);\n            console.log(\" Database tables initialized successfully\");\n        } catch (error) {\n            console.error(\" Failed to initialize database tables:\", error);\n            throw error;\n        }\n    }\n}\n// Singleton instance\nconst databaseService = DatabaseService.getInstance();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixNQUFNLElBQUksQ0FBQ3JCLEtBQUssQ0FBQ2tCO1lBQ2pCLE1BQU0sSUFBSSxDQUFDbEIsS0FBSyxDQUFDbUI7WUFDakIsTUFBTSxJQUFJLENBQUNuQixLQUFLLENBQUNvQjtZQUNqQixNQUFNLElBQUksQ0FBQ3BCLEtBQUssQ0FBQ3FCO1lBQ2pCN0IsUUFBUUMsR0FBRyxDQUFDO1FBQ2QsRUFBRSxPQUFPQyxPQUFPO1lBQ2RGLFFBQVFFLEtBQUssQ0FBQywyQ0FBMkNBO1lBQ3pELE1BQU1BO1FBQ1I7SUFDRjtBQUNGO0FBRUEscUJBQXFCO0FBQ2QsTUFBTTRCLGtCQUFrQnpELGdCQUFnQkssV0FBVyxHQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FzaGNvbnRyb2wvLi9zcmMvbGliL2RhdGFiYXNlL2NvbmZpZy50cz85ZWIyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIERhdGFiYXNlIENvbmZpZ3VyYXRpb24gZm9yIFBsZXNrIE15U1FMXG4vLyBIYW5kbGVzIGNvbm5lY3Rpb24gdG8gUGxlc2sgaG9zdGluZyBNeVNRTCBkYXRhYmFzZVxuXG5pbXBvcnQgbXlzcWwgZnJvbSAnbXlzcWwyL3Byb21pc2UnXG5cbmV4cG9ydCBpbnRlcmZhY2UgRGF0YWJhc2VDb25maWcge1xuICBob3N0OiBzdHJpbmdcbiAgcG9ydDogbnVtYmVyXG4gIGRhdGFiYXNlOiBzdHJpbmdcbiAgdXNlcjogc3RyaW5nXG4gIHBhc3N3b3JkOiBzdHJpbmdcbiAgY29ubmVjdGlvbkxpbWl0PzogbnVtYmVyXG4gIGFjcXVpcmVUaW1lb3V0PzogbnVtYmVyXG4gIHRpbWVvdXQ/OiBudW1iZXJcbiAgcmVjb25uZWN0PzogYm9vbGVhblxufVxuXG5leHBvcnQgY2xhc3MgRGF0YWJhc2VTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IERhdGFiYXNlU2VydmljZVxuICBwcml2YXRlIHBvb2w6IG15c3FsLlBvb2wgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIGNvbmZpZzogRGF0YWJhc2VDb25maWdcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY29uZmlnID0gdGhpcy5nZXREYXRhYmFzZUNvbmZpZygpXG4gICAgdGhpcy5pbml0aWFsaXplUG9vbCgpXG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IERhdGFiYXNlU2VydmljZSB7XG4gICAgaWYgKCFEYXRhYmFzZVNlcnZpY2UuaW5zdGFuY2UpIHtcbiAgICAgIERhdGFiYXNlU2VydmljZS5pbnN0YW5jZSA9IG5ldyBEYXRhYmFzZVNlcnZpY2UoKVxuICAgIH1cbiAgICByZXR1cm4gRGF0YWJhc2VTZXJ2aWNlLmluc3RhbmNlXG4gIH1cblxuICBwcml2YXRlIGdldERhdGFiYXNlQ29uZmlnKCk6IERhdGFiYXNlQ29uZmlnIHtcbiAgICByZXR1cm4ge1xuICAgICAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCAnbG9jYWxob3N0JyxcbiAgICAgIHBvcnQ6IHBhcnNlSW50KHByb2Nlc3MuZW52LkRCX1BPUlQgfHwgJzMzMDYnKSxcbiAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8ICcnLFxuICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCAnJyxcbiAgICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCB8fCAnJyxcbiAgICAgIGNvbm5lY3Rpb25MaW1pdDogMTAsXG4gICAgICBhY3F1aXJlVGltZW91dDogNjAwMDAsXG4gICAgICB0aW1lb3V0OiA2MDAwMCxcbiAgICAgIHJlY29ubmVjdDogdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVBvb2woKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucG9vbCA9IG15c3FsLmNyZWF0ZVBvb2woe1xuICAgICAgICBob3N0OiB0aGlzLmNvbmZpZy5ob3N0LFxuICAgICAgICBwb3J0OiB0aGlzLmNvbmZpZy5wb3J0LFxuICAgICAgICBkYXRhYmFzZTogdGhpcy5jb25maWcuZGF0YWJhc2UsXG4gICAgICAgIHVzZXI6IHRoaXMuY29uZmlnLnVzZXIsXG4gICAgICAgIHBhc3N3b3JkOiB0aGlzLmNvbmZpZy5wYXNzd29yZCxcbiAgICAgICAgY29ubmVjdGlvbkxpbWl0OiB0aGlzLmNvbmZpZy5jb25uZWN0aW9uTGltaXQsXG4gICAgICAgIGFjcXVpcmVUaW1lb3V0OiB0aGlzLmNvbmZpZy5hY3F1aXJlVGltZW91dCxcbiAgICAgICAgdGltZW91dDogdGhpcy5jb25maWcudGltZW91dCxcbiAgICAgICAgcmVjb25uZWN0OiB0aGlzLmNvbmZpZy5yZWNvbm5lY3QsXG4gICAgICAgIHNzbDogZmFsc2UsIC8vIFBsZXNrIHVzdWFsbHkgZG9lc24ndCByZXF1aXJlIFNTTCBmb3IgbG9jYWxob3N0IGNvbm5lY3Rpb25zXG4gICAgICAgIGNoYXJzZXQ6ICd1dGY4bWI0J1xuICAgICAgfSlcblxuICAgICAgY29uc29sZS5sb2coJ+KchSBNeVNRTCBjb25uZWN0aW9uIHBvb2wgaW5pdGlhbGl6ZWQgZm9yIFBsZXNrIGRhdGFiYXNlJylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBpbml0aWFsaXplIE15U1FMIGNvbm5lY3Rpb24gcG9vbDonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICghdGhpcy5wb29sKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRGF0YWJhc2UgcG9vbCBub3QgaW5pdGlhbGl6ZWQnKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCB0aGlzLnBvb2wuZ2V0Q29ubmVjdGlvbigpXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLnBpbmcoKVxuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKClcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgRGF0YWJhc2UgY29ubmVjdGlvbiB0ZXN0IHN1Y2Nlc3NmdWwnKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIERhdGFiYXNlIGNvbm5lY3Rpb24gdGVzdCBmYWlsZWQ6JywgZXJyb3IpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcXVlcnk8VCA9IGFueT4oc3FsOiBzdHJpbmcsIHBhcmFtcz86IGFueVtdKTogUHJvbWlzZTxUW10+IHtcbiAgICBpZiAoIXRoaXMucG9vbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBwb29sIG5vdCBpbml0aWFsaXplZCcpXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IHRoaXMucG9vbC5leGVjdXRlKHNxbCwgcGFyYW1zKVxuICAgICAgcmV0dXJuIHJvd3MgYXMgVFtdXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBEYXRhYmFzZSBxdWVyeSBmYWlsZWQ6JywgZXJyb3IpXG4gICAgICBjb25zb2xlLmVycm9yKCdTUUw6Jywgc3FsKVxuICAgICAgY29uc29sZS5lcnJvcignUGFyYW1zOicsIHBhcmFtcylcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHF1ZXJ5T25lPFQgPSBhbnk+KHNxbDogc3RyaW5nLCBwYXJhbXM/OiBhbnlbXSk6IFByb21pc2U8VCB8IG51bGw+IHtcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5xdWVyeTxUPihzcWwsIHBhcmFtcylcbiAgICByZXR1cm4gcmVzdWx0cy5sZW5ndGggPiAwID8gcmVzdWx0c1swXSA6IG51bGxcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB0cmFuc2FjdGlvbjxUPihjYWxsYmFjazogKGNvbm5lY3Rpb246IG15c3FsLlBvb2xDb25uZWN0aW9uKSA9PiBQcm9taXNlPFQ+KTogUHJvbWlzZTxUPiB7XG4gICAgaWYgKCF0aGlzLnBvb2wpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgcG9vbCBub3QgaW5pdGlhbGl6ZWQnKVxuICAgIH1cblxuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCB0aGlzLnBvb2wuZ2V0Q29ubmVjdGlvbigpXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uYmVnaW5UcmFuc2FjdGlvbigpXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYWxsYmFjayhjb25uZWN0aW9uKVxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb21taXQoKVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLnJvbGxiYWNrKClcbiAgICAgIHRocm93IGVycm9yXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGNsb3NlUG9vbCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5wb29sKSB7XG4gICAgICBhd2FpdCB0aGlzLnBvb2wuZW5kKClcbiAgICAgIHRoaXMucG9vbCA9IG51bGxcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgRGF0YWJhc2UgY29ubmVjdGlvbiBwb29sIGNsb3NlZCcpXG4gICAgfVxuICB9XG5cbiAgLy8gSGVscGVyIG1ldGhvZCB0byBjcmVhdGUgdGFibGVzIGlmIHRoZXkgZG9uJ3QgZXhpc3RcbiAgcHVibGljIGFzeW5jIGluaXRpYWxpemVUYWJsZXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgY3JlYXRlVXNlcnNUYWJsZSA9IGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHVzZXJzIChcbiAgICAgICAgaWQgVkFSQ0hBUigyNTUpIFBSSU1BUlkgS0VZLFxuICAgICAgICBlbWFpbCBWQVJDSEFSKDI1NSkgVU5JUVVFIE5PVCBOVUxMLFxuICAgICAgICBuYW1lIFZBUkNIQVIoMjU1KSxcbiAgICAgICAgaW1hZ2UgVkFSQ0hBUig1MDApLFxuICAgICAgICBpc19wYWlkIEJPT0xFQU4gREVGQVVMVCBGQUxTRSxcbiAgICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgdXBkYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCBPTiBVUERBVEUgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIElOREVYIGlkeF9lbWFpbCAoZW1haWwpLFxuICAgICAgICBJTkRFWCBpZHhfaXNfcGFpZCAoaXNfcGFpZClcbiAgICAgICkgRU5HSU5FPUlubm9EQiBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfdW5pY29kZV9jaTtcbiAgICBgXG5cbiAgICBjb25zdCBjcmVhdGVTdWJzY3JpcHRpb25zVGFibGUgPSBgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBzdWJzY3JpcHRpb25zIChcbiAgICAgICAgaWQgVkFSQ0hBUigyNTUpIFBSSU1BUlkgS0VZLFxuICAgICAgICB1c2VyX2lkIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgbmFtZSBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgICAgIGFtb3VudCBERUNJTUFMKDEwLDIpIE5PVCBOVUxMLFxuICAgICAgICBjdXJyZW5jeSBWQVJDSEFSKDMpIERFRkFVTFQgJ0VVUicsXG4gICAgICAgIGJpbGxpbmdfY3ljbGUgRU5VTSgnbW9udGhseScsICd5ZWFybHknLCAnd2Vla2x5JywgJ2RhaWx5JykgREVGQVVMVCAnbW9udGhseScsXG4gICAgICAgIG5leHRfYmlsbGluZ19kYXRlIERBVEUsXG4gICAgICAgIHN0YXR1cyBFTlVNKCdhY3RpdmUnLCAnY2FuY2VsbGVkJywgJ3BhdXNlZCcpIERFRkFVTFQgJ2FjdGl2ZScsXG4gICAgICAgIGNhdGVnb3J5IFZBUkNIQVIoMTAwKSxcbiAgICAgICAgZGVzY3JpcHRpb24gVEVYVCxcbiAgICAgICAgd2Vic2l0ZV91cmwgVkFSQ0hBUig1MDApLFxuICAgICAgICBjYW5jZWxfdXJsIFZBUkNIQVIoNTAwKSxcbiAgICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgdXBkYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCBPTiBVUERBVEUgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIEZPUkVJR04gS0VZICh1c2VyX2lkKSBSRUZFUkVOQ0VTIHVzZXJzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICAgICAgSU5ERVggaWR4X3VzZXJfaWQgKHVzZXJfaWQpLFxuICAgICAgICBJTkRFWCBpZHhfc3RhdHVzIChzdGF0dXMpLFxuICAgICAgICBJTkRFWCBpZHhfbmV4dF9iaWxsaW5nX2RhdGUgKG5leHRfYmlsbGluZ19kYXRlKVxuICAgICAgKSBFTkdJTkU9SW5ub0RCIERFRkFVTFQgQ0hBUlNFVD11dGY4bWI0IENPTExBVEU9dXRmOG1iNF91bmljb2RlX2NpO1xuICAgIGBcblxuICAgIGNvbnN0IGNyZWF0ZVVzZXJQcmVmZXJlbmNlc1RhYmxlID0gYFxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdXNlcl9wcmVmZXJlbmNlcyAoXG4gICAgICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICAgICAgdXNlcl9pZCBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgICAgIHJlbWluZGVyX2RheXMgSlNPTiBERUZBVUxUICdbXScsXG4gICAgICAgIHJlbWluZGVyX2ZyZXF1ZW5jeSBFTlVNKCdvbmNlJywgJ2RhaWx5JywgJ3dlZWtseScpIERFRkFVTFQgJ29uY2UnLFxuICAgICAgICBwcmVmZXJyZWRfdGltZSBUSU1FIERFRkFVTFQgJzA5OjAwOjAwJyxcbiAgICAgICAgZW1haWxfd2VsY29tZSBCT09MRUFOIERFRkFVTFQgVFJVRSxcbiAgICAgICAgZW1haWxfdXBncmFkZSBCT09MRUFOIERFRkFVTFQgVFJVRSxcbiAgICAgICAgZW1haWxfYmFua19zY2FuIEJPT0xFQU4gREVGQVVMVCBUUlVFLFxuICAgICAgICBlbWFpbF9yZW1pbmRlcnMgQk9PTEVBTiBERUZBVUxUIFRSVUUsXG4gICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIHVwZGF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAgT04gVVBEQVRFIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICBVTklRVUUgS0VZIHVuaXF1ZV91c2VyX3ByZWZzICh1c2VyX2lkKSxcbiAgICAgICAgRk9SRUlHTiBLRVkgKHVzZXJfaWQpIFJFRkVSRU5DRVMgdXNlcnMoaWQpIE9OIERFTEVURSBDQVNDQURFXG4gICAgICApIEVOR0lORT1Jbm5vREIgREVGQVVMVCBDSEFSU0VUPXV0ZjhtYjQgQ09MTEFURT11dGY4bWI0X3VuaWNvZGVfY2k7XG4gICAgYFxuXG4gICAgY29uc3QgY3JlYXRlUmVtaW5kZXJMb2dzVGFibGUgPSBgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyByZW1pbmRlcl9sb2dzIChcbiAgICAgICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLFxuICAgICAgICB1c2VyX2lkIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgc3Vic2NyaXB0aW9uX2lkIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgc2VudF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgZGF5c19iZWZvcmVfcmVuZXdhbCBJTlQgTk9UIE5VTEwsXG4gICAgICAgIGVtYWlsX3NlbnQgQk9PTEVBTiBERUZBVUxUIEZBTFNFLFxuICAgICAgICBlcnJvcl9tZXNzYWdlIFRFWFQsXG4gICAgICAgIElOREVYIGlkeF91c2VyX2lkICh1c2VyX2lkKSxcbiAgICAgICAgSU5ERVggaWR4X3N1YnNjcmlwdGlvbl9pZCAoc3Vic2NyaXB0aW9uX2lkKSxcbiAgICAgICAgSU5ERVggaWR4X3NlbnRfYXQgKHNlbnRfYXQpLFxuICAgICAgICBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyB1c2VycyhpZCkgT04gREVMRVRFIENBU0NBREUsXG4gICAgICAgIEZPUkVJR04gS0VZIChzdWJzY3JpcHRpb25faWQpIFJFRkVSRU5DRVMgc3Vic2NyaXB0aW9ucyhpZCkgT04gREVMRVRFIENBU0NBREVcbiAgICAgICkgRU5HSU5FPUlubm9EQiBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfdW5pY29kZV9jaTtcbiAgICBgXG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5xdWVyeShjcmVhdGVVc2Vyc1RhYmxlKVxuICAgICAgYXdhaXQgdGhpcy5xdWVyeShjcmVhdGVTdWJzY3JpcHRpb25zVGFibGUpXG4gICAgICBhd2FpdCB0aGlzLnF1ZXJ5KGNyZWF0ZVVzZXJQcmVmZXJlbmNlc1RhYmxlKVxuICAgICAgYXdhaXQgdGhpcy5xdWVyeShjcmVhdGVSZW1pbmRlckxvZ3NUYWJsZSlcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgRGF0YWJhc2UgdGFibGVzIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gaW5pdGlhbGl6ZSBkYXRhYmFzZSB0YWJsZXM6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxufVxuXG4vLyBTaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBkYXRhYmFzZVNlcnZpY2UgPSBEYXRhYmFzZVNlcnZpY2UuZ2V0SW5zdGFuY2UoKVxuIl0sIm5hbWVzIjpbIm15c3FsIiwiRGF0YWJhc2VTZXJ2aWNlIiwicG9vbCIsImNvbmZpZyIsImdldERhdGFiYXNlQ29uZmlnIiwiaW5pdGlhbGl6ZVBvb2wiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwiaG9zdCIsInByb2Nlc3MiLCJlbnYiLCJEQl9IT1NUIiwicG9ydCIsInBhcnNlSW50IiwiREJfUE9SVCIsImRhdGFiYXNlIiwiREJfTkFNRSIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImNvbm5lY3Rpb25MaW1pdCIsImFjcXVpcmVUaW1lb3V0IiwidGltZW91dCIsInJlY29ubmVjdCIsImNyZWF0ZVBvb2wiLCJzc2wiLCJjaGFyc2V0IiwiY29uc29sZSIsImxvZyIsImVycm9yIiwidGVzdENvbm5lY3Rpb24iLCJjb25uZWN0aW9uIiwiZ2V0Q29ubmVjdGlvbiIsInBpbmciLCJyZWxlYXNlIiwicXVlcnkiLCJzcWwiLCJwYXJhbXMiLCJFcnJvciIsInJvd3MiLCJleGVjdXRlIiwicXVlcnlPbmUiLCJyZXN1bHRzIiwibGVuZ3RoIiwidHJhbnNhY3Rpb24iLCJjYWxsYmFjayIsImJlZ2luVHJhbnNhY3Rpb24iLCJyZXN1bHQiLCJjb21taXQiLCJyb2xsYmFjayIsImNsb3NlUG9vbCIsImVuZCIsImluaXRpYWxpemVUYWJsZXMiLCJjcmVhdGVVc2Vyc1RhYmxlIiwiY3JlYXRlU3Vic2NyaXB0aW9uc1RhYmxlIiwiY3JlYXRlVXNlclByZWZlcmVuY2VzVGFibGUiLCJjcmVhdGVSZW1pbmRlckxvZ3NUYWJsZSIsImRhdGFiYXNlU2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database/config.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/aws-ssl-profiles","vendor-chunks/iconv-lite","vendor-chunks/next-auth","vendor-chunks/long","vendor-chunks/@babel","vendor-chunks/named-placeholders","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/generate-function","vendor-chunks/uuid","vendor-chunks/safer-buffer","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/bcryptjs","vendor-chunks/oauth","vendor-chunks/preact","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/cookie","vendor-chunks/@panva","vendor-chunks/oidc-token-hash"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Fstatus%2Froute&page=%2Fapi%2Fuser%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fstatus%2Froute.ts&appDir=C%3A%5CUsers%5CGebruiker%5CDocuments%5CGitHub%5CI-hate-subscriptions%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CGebruiker%5CDocuments%5CGitHub%5CI-hate-subscriptions&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();