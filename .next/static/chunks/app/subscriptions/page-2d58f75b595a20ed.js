(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[885],{2169:function(e,t,a){Promise.resolve().then(a.bind(a,5177))},5177:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var s=a(57437),r=a(2265),l=a(74705),i=a(19533),c=a(71239),n=a(56928),d=a(17689),x=a(92735),o=a(99397),m=a(73247),y=a(39763);let h=(0,y.Z)("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),p=(0,y.Z)("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]),g=(0,y.Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),u=(0,y.Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);var b=a(27648);function j(){let[e,t]=(0,r.useState)([]),[a,y]=(0,r.useState)(""),[j,k]=(0,r.useState)("all"),[f,N]=(0,r.useState)(!1),[v,w]=(0,r.useState)("name"),[C,S]=(0,r.useState)("asc"),[M,A]=(0,r.useState)("grid"),[L,Z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=()=>{t(l.o.getSubscriptions())};return e(),l.o.subscribe(e)},[]);let B=e.filter(e=>{if(a.trim()){var t,s;let r=a.toLowerCase();if(!(e.name.toLowerCase().includes(r)||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(s=e.tags)||void 0===s?void 0:s.some(e=>e.toLowerCase().includes(r)))))return!1}return("all"===j||e.category===j)&&(!f||!!e.isActive)}).sort((e,t)=>{let a=0;switch(v){case"name":a=e.name.localeCompare(t.name);break;case"price":a=D(e)-D(t);break;case"nextBilling":a=new Date(e.nextBillingDate).getTime()-new Date(t.nextBillingDate).getTime();break;case"category":a=e.category.localeCompare(t.category)}return"asc"===C?a:-a}),D=e=>e.price*(({monthly:1,yearly:1/12,quarterly:1/3,weekly:4.33,daily:30})[e.billingCycle]||1),U=e=>{v===e?S("asc"===C?"desc":"asc"):(w(e),S("asc"))},E=B.filter(e=>e.isActive).reduce((e,t)=>e+D(t),0);return(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"All Subscriptions"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage and track all your recurring payments"})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-4 sm:mt-0",children:[(0,s.jsxs)("button",{onClick:()=>Z(!0),className:"btn-secondary flex items-center gap-2",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),"Import CSV"]}),(0,s.jsxs)("button",{onClick:()=>{let e=new Blob([l.o.exportData()],{type:"application/json"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="subscriptions-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)},className:"btn-secondary flex items-center gap-2",children:[(0,s.jsx)(x.Z,{className:"h-4 w-4"}),"Export"]}),(0,s.jsxs)(b.default,{href:"/subscriptions/new",className:"btn-primary flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4"}),"Add Subscription"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Subscriptions"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:B.length})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Subscriptions"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:B.filter(e=>e.isActive).length})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Monthly Spend (Filtered)"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",E.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"card mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search subscriptions...",value:a,onChange:e=>y(e.target.value),className:"input-field pl-10"})]}),(0,s.jsxs)("select",{value:j,onChange:e=>k(e.target.value),className:"input-field",children:[(0,s.jsx)("option",{value:"all",children:"All Categories"}),Object.entries(i.H).map(e=>{let[t,{label:a}]=e;return(0,s.jsx)("option",{value:t,children:a},t)})]}),(0,s.jsxs)("label",{className:"flex items-center whitespace-nowrap",children:[(0,s.jsx)("input",{type:"checkbox",checked:f,onChange:e=>N(e.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 mr-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Active only"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4 sm:mb-0",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sort by:"}),["name","price","nextBilling","category"].map(e=>(0,s.jsxs)("button",{onClick:()=>U(e),className:"flex items-center gap-1 px-3 py-1 rounded-md text-sm transition-colors ".concat(v===e?"bg-primary-100 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:["nextBilling"===e?"Next Billing":e.charAt(0).toUpperCase()+e.slice(1),v===e&&("asc"===C?(0,s.jsx)(h,{className:"h-3 w-3"}):(0,s.jsx)(p,{className:"h-3 w-3"}))]},e))]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View:"}),(0,s.jsx)("button",{onClick:()=>A("grid"),className:"p-2 rounded-md transition-colors ".concat("grid"===M?"bg-primary-100 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:(0,s.jsx)(g,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>A("list"),className:"p-2 rounded-md transition-colors ".concat("list"===M?"bg-primary-100 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:(0,s.jsx)(u,{className:"h-4 w-4"})})]})]})]}),0===B.length?(0,s.jsxs)("div",{className:"card text-center py-12",children:[(0,s.jsx)("div",{className:"mx-auto w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)(m.Z,{className:"h-6 w-6 text-gray-400"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No subscriptions found"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:a||"all"!==j||f?"Try adjusting your search or filters":"Get started by adding your first subscription"}),!a&&"all"===j&&!f&&(0,s.jsx)(b.default,{href:"/subscriptions/new",className:"btn-primary",children:"Add Your First Subscription"})]}):(0,s.jsx)("div",{className:"grid"===M?"space-y-4":"grid gap-4",children:B.map(e=>(0,s.jsx)(c.U,{subscription:e},e.id))}),L&&(0,s.jsx)(n.u,{onClose:()=>Z(!1)})]})}}},function(e){e.O(0,[451,533,993,971,117,744],function(){return e(e.s=2169)}),_N_E=e.O()}]);