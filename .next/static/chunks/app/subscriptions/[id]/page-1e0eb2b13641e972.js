(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99],{13070:function(e,t,s){Promise.resolve().then(s.bind(s,82904))},18930:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(39763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},82904:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var i=s(57437),a=s(2265),r=s(99376),l=s(74705),n=s(29501),c=s(13590),o=s(67119),d=s(19533),m=s(22252),u=s(29202),x=s(95252),h=s(31047),g=s(62720);let p=o.Ry({name:o.Z_().min(1,"Name is required").max(100,"Name must be less than 100 characters"),price:o.Rx().min(.01,"Price must be greater than 0"),currency:o.Z_().default("USD"),billingCycle:o.Km(["monthly","yearly","weekly","daily","quarterly"]),nextBillingDate:o.Z_().min(1,"Next billing date is required"),category:o.Km(["streaming","software","gaming","fitness","utilities","food","education","finance","productivity","entertainment","news","music","cloud_storage","communication","other"]),description:o.Z_().optional(),website:o.Z_().url("Please enter a valid URL").optional().or(o.i0("")),reminderDays:o.Rx().min(0).max(30).default(3),tags:o.Z_().optional(),isActive:o.O7().default(!0)});function b(e){var t;let{subscription:s,onSuccess:r,onCancel:o}=e,[b,y]=(0,a.useState)(!1),{register:f,handleSubmit:v,formState:{errors:j},watch:N}=(0,n.cI)({resolver:(0,c.F)(p),defaultValues:{name:s.name,price:s.price,currency:s.currency,billingCycle:s.billingCycle,nextBillingDate:s.nextBillingDate.split("T")[0],category:s.category,description:s.description||"",website:s.website||"",reminderDays:s.reminderDays,tags:(null===(t=s.tags)||void 0===t?void 0:t.join(", "))||"",isActive:s.isActive}}),w=N("billingCycle"),k=N("price"),S=async e=>{y(!0);try{let t=e.tags?e.tags.split(",").map(e=>e.trim()).filter(Boolean):[];l.o.updateSubscription(s.id,{name:e.name,price:e.price,currency:e.currency,billingCycle:e.billingCycle,nextBillingDate:e.nextBillingDate,category:e.category,description:e.description||void 0,website:e.website||void 0,reminderDays:e.reminderDays,tags:t.length>0?t:void 0,isActive:e.isActive}),r&&r()}catch(e){console.error("Error updating subscription:",e)}finally{y(!1)}};return(0,i.jsxs)("form",{onSubmit:v(S),className:"space-y-6",children:[(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Basic Information"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Service Name *"}),(0,i.jsx)("input",{type:"text",...f("name"),placeholder:"e.g., Netflix, Spotify, Adobe Creative Cloud",className:"input-field"}),j.name&&(0,i.jsxs)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[(0,i.jsx)(m.Z,{className:"h-4 w-4"}),j.name.message]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category *"}),(0,i.jsx)("select",{...f("category"),className:"input-field",children:Object.entries(d.H).map(e=>{let[t,{label:s}]=e;return(0,i.jsx)("option",{value:t,children:s},t)})})]})]}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,i.jsx)("textarea",{...f("description"),rows:3,placeholder:"Optional description or notes about this subscription",className:"input-field"})]}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Website"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,i.jsx)("input",{type:"url",...f("website"),placeholder:"https://example.com",className:"input-field pl-10"})]}),j.website&&(0,i.jsxs)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[(0,i.jsx)(m.Z,{className:"h-4 w-4"}),j.website.message]})]})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Pricing Information"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price *"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,i.jsx)("input",{type:"number",step:"0.01",min:"0",...f("price",{valueAsNumber:!0}),placeholder:"0.00",className:"input-field pl-10"})]}),j.price&&(0,i.jsxs)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[(0,i.jsx)(m.Z,{className:"h-4 w-4"}),j.price.message]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Billing Cycle *"}),(0,i.jsx)("select",{...f("billingCycle"),className:"input-field",children:d.Z.map(e=>{let{value:t,label:s}=e;return(0,i.jsx)("option",{value:t,children:s},t)})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Currency"}),(0,i.jsxs)("select",{...f("currency"),className:"input-field",children:[(0,i.jsx)("option",{value:"USD",children:"USD ($)"}),(0,i.jsx)("option",{value:"EUR",children:"EUR (â‚¬)"}),(0,i.jsx)("option",{value:"GBP",children:"GBP (\xa3)"}),(0,i.jsx)("option",{value:"CAD",children:"CAD (C$)"}),(0,i.jsx)("option",{value:"AUD",children:"AUD (A$)"})]})]})]}),k&&(0,i.jsx)("div",{className:"mt-4 p-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg",children:(0,i.jsxs)("p",{className:"text-sm text-primary-700 dark:text-primary-300",children:[(0,i.jsx)("strong",{children:"Monthly equivalent:"})," $",(()=>{if(!k)return 0;let e=d.Z.find(e=>e.value===w);return k*((null==e?void 0:e.multiplier)||1)})().toFixed(2)," per month"]})}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Next Billing Date *"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,i.jsx)("input",{type:"date",...f("nextBillingDate"),className:"input-field pl-10"})]}),j.nextBillingDate&&(0,i.jsxs)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[(0,i.jsx)(m.Z,{className:"h-4 w-4"}),j.nextBillingDate.message]})]})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Additional Settings"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reminder (days before renewal)"}),(0,i.jsx)("input",{type:"number",min:"0",max:"30",...f("reminderDays",{valueAsNumber:!0}),className:"input-field"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,i.jsx)("input",{type:"text",...f("tags"),placeholder:"work, personal, essential (comma-separated)",className:"input-field pl-10"})]})]})]}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsxs)("label",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",...f("isActive"),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,i.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"This subscription is currently active"})]})})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-4",children:[o&&(0,i.jsx)("button",{type:"button",onClick:o,className:"btn-secondary",disabled:b,children:"Cancel"}),(0,i.jsx)("button",{type:"submit",disabled:b,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Saving...":"Save Changes"})]})]})}var y=s(32660),f=s(18930),v=s(27648);function j(){let e=(0,r.useParams)(),t=(0,r.useRouter)(),[s,n]=(0,a.useState)(null),[c,o]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{e.id&&n(l.o.getSubscriptions().find(t=>t.id===e.id)||null)},[e.id]);let u=async()=>{if(s){o(!0);try{l.o.deleteSubscription(s.id),t.push("/dashboard")}catch(e){console.error("Error deleting subscription:",e)}finally{o(!1)}}};return s?(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsxs)(v.default,{href:"/dashboard",className:"inline-flex items-center text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 mb-4",children:[(0,i.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["Edit ",s.name]}),(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Update your subscription details"})]}),(0,i.jsxs)("button",{onClick:()=>m(!0),className:"btn-secondary text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[(0,i.jsx)(f.Z,{className:"h-4 w-4"}),"Delete"]})]})]}),(0,i.jsx)(b,{subscription:s,onSuccess:()=>t.push("/dashboard")}),d&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Delete Subscription"}),(0,i.jsxs)("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',s.name,'"? This action cannot be undone.']}),(0,i.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,i.jsx)("button",{onClick:()=>m(!1),className:"btn-secondary",disabled:c,children:"Cancel"}),(0,i.jsx)("button",{onClick:u,disabled:c,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50",children:c?"Deleting...":"Delete"})]})]})})]}):(0,i.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Subscription Not Found"}),(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The subscription you're looking for doesn't exist."}),(0,i.jsx)(v.default,{href:"/dashboard",className:"btn-primary",children:"Back to Dashboard"})]})})}},74705:function(e,t,s){"use strict";s.d(t,{o:function(){return a}});class i{getSubscriptions(){try{let e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading subscriptions:",e),[]}}saveSubscriptions(e){try{localStorage.setItem(this.storageKey,JSON.stringify(e)),this.notifyListeners()}catch(e){console.error("Error saving subscriptions:",e)}}addSubscription(e){let t={...e,id:crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},s=this.getSubscriptions();return s.push(t),this.saveSubscriptions(s),t}updateSubscription(e,t){let s=this.getSubscriptions(),i=s.findIndex(t=>t.id===e);return -1===i?null:(s[i]={...s[i],...t,updatedAt:new Date().toISOString()},this.saveSubscriptions(s),s[i])}deleteSubscription(e){let t=this.getSubscriptions(),s=t.filter(t=>t.id!==e);return s.length!==t.length&&(this.saveSubscriptions(s),!0)}getStats(){let e=this.getSubscriptions().filter(e=>e.isActive),t=0,s=0,i={streaming:0,software:0,gaming:0,fitness:0,utilities:0,food:0,education:0,finance:0,productivity:0,entertainment:0,news:0,music:0,cloud_storage:0,communication:0,other:0};e.forEach(e=>{let a=this.getMonthlyAmount(e);t+=a,s+=12*a,i[e.category]+=a});let a=new Date;a.setDate(a.getDate()+7);let r=e.filter(e=>{let t=new Date(e.nextBillingDate);return t<=a&&t>=new Date}).length,l=this.generateMonthlyTrend(e);return{totalMonthly:t,totalYearly:s,activeCount:e.length,dueSoon:r,categoryBreakdown:i,monthlyTrend:l}}getMonthlyAmount(e){let{price:t,billingCycle:s}=e;switch(s){case"monthly":default:return t;case"yearly":return t/12;case"quarterly":return t/3;case"weekly":return 4.33*t;case"daily":return 30*t}}generateMonthlyTrend(e){let t=[],s=new Date;for(let i=11;i>=0;i--){let a=new Date(s.getFullYear(),s.getMonth()-i,1),r=a.toLocaleDateString("en-US",{month:"short",year:"2-digit"}),l=e.filter(e=>new Date(e.createdAt)<=a).reduce((e,t)=>e+this.getMonthlyAmount(t),0);t.push({month:r,amount:l})}return t}getUpcomingRenewals(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=this.getSubscriptions().filter(e=>e.isActive),s=new Date;return s.setDate(s.getDate()+e),t.filter(e=>{let t=new Date(e.nextBillingDate);return t<=s&&t>=new Date}).sort((e,t)=>new Date(e.nextBillingDate).getTime()-new Date(t.nextBillingDate).getTime())}searchSubscriptions(e,t){let s=this.getSubscriptions();if(e.trim()){let t=e.toLowerCase();s=s.filter(e=>{var s,i;return e.name.toLowerCase().includes(t)||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(i=e.tags)||void 0===i?void 0:i.some(e=>e.toLowerCase().includes(t)))})}return t&&(t.category&&(s=s.filter(e=>e.category===t.category)),void 0!==t.minPrice&&(s=s.filter(e=>this.getMonthlyAmount(e)>=t.minPrice)),void 0!==t.maxPrice&&(s=s.filter(e=>this.getMonthlyAmount(e)<=t.maxPrice)),void 0!==t.isActive&&(s=s.filter(e=>e.isActive===t.isActive))),s}bulkImport(e){let t=e.map(e=>({...e,id:crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})),s=[...this.getSubscriptions(),...t];return this.saveSubscriptions(s),t}exportData(){return JSON.stringify(this.getSubscriptions(),null,2)}clearAllData(){localStorage.removeItem(this.storageKey),this.notifyListeners()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>e())}constructor(){this.storageKey="subscriptions",this.listeners=new Set}}let a=new i},19533:function(e,t,s){"use strict";s.d(t,{H:function(){return i},Z:function(){return a}});let i={streaming:{label:"Streaming & Media",color:"#ef4444"},software:{label:"Software & Tools",color:"#3b82f6"},gaming:{label:"Gaming",color:"#8b5cf6"},fitness:{label:"Health & Fitness",color:"#10b981"},utilities:{label:"Utilities",color:"#f59e0b"},food:{label:"Food & Delivery",color:"#f97316"},education:{label:"Education",color:"#06b6d4"},finance:{label:"Finance & Banking",color:"#84cc16"},productivity:{label:"Productivity",color:"#6366f1"},entertainment:{label:"Entertainment",color:"#ec4899"},news:{label:"News & Media",color:"#64748b"},music:{label:"Music & Audio",color:"#14b8a6"},cloud_storage:{label:"Cloud Storage",color:"#a855f7"},communication:{label:"Communication",color:"#22c55e"},other:{label:"Other",color:"#6b7280"}},a=[{value:"monthly",label:"Monthly",multiplier:1},{value:"yearly",label:"Yearly",multiplier:1/12},{value:"quarterly",label:"Quarterly",multiplier:1/3},{value:"weekly",label:"Weekly",multiplier:4.33},{value:"daily",label:"Daily",multiplier:30}]}},function(e){e.O(0,[451,144,971,117,744],function(){return e(e.s=13070)}),_N_E=e.O()}]);