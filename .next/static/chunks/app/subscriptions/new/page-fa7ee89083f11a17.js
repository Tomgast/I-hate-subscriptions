(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{75386:function(e,t,i){Promise.resolve().then(i.bind(i,134))},134:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return v}});var s=i(57437),r=i(2265),a=i(29501),l=i(13590),n=i(67119),c=i(74705),o=i(19533),d=i(22252),m=i(29202),u=i(95252),x=i(31047),g=i(62720),h=i(99376);let p=n.Ry({name:n.Z_().min(1,"Name is required").max(100,"Name must be less than 100 characters"),price:n.Rx().min(.01,"Price must be greater than 0"),currency:n.Z_().default("USD"),billingCycle:n.Km(["monthly","yearly","weekly","daily","quarterly"]),nextBillingDate:n.Z_().min(1,"Next billing date is required"),category:n.Km(["streaming","software","gaming","fitness","utilities","food","education","finance","productivity","entertainment","news","music","cloud_storage","communication","other"]),description:n.Z_().optional(),website:n.Z_().url("Please enter a valid URL").optional().or(n.i0("")),reminderDays:n.Rx().min(0).max(30).default(3),tags:n.Z_().optional(),isActive:n.O7().default(!0)});function y(e){let{onSuccess:t,onCancel:i}=e,[n,y]=(0,r.useState)(!1),b=(0,h.useRouter)(),{register:f,handleSubmit:v,formState:{errors:j},watch:N,setValue:w}=(0,a.cI)({resolver:(0,l.F)(p),defaultValues:{currency:"USD",billingCycle:"monthly",category:"other",reminderDays:3,isActive:!0}}),S=N("billingCycle"),D=N("price"),k=async e=>{y(!0);try{let i=e.tags?e.tags.split(",").map(e=>e.trim()).filter(Boolean):[];c.o.addSubscription({name:e.name,price:e.price,currency:e.currency,billingCycle:e.billingCycle,nextBillingDate:e.nextBillingDate,category:e.category,description:e.description||void 0,website:e.website||void 0,reminderDays:e.reminderDays,tags:i.length>0?i:void 0,isActive:e.isActive}),t?t():b.push("/dashboard")}catch(e){console.error("Error adding subscription:",e)}finally{y(!1)}};return(0,s.jsxs)("form",{onSubmit:v(k),className:"space-y-6",children:[(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Basic Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Service Name *"}),(0,s.jsx)("input",{type:"text",...f("name"),placeholder:"e.g., Netflix, Spotify, Adobe Creative Cloud",className:"input-field"}),j.name&&(0,s.jsxs)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),j.name.message]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category *"}),(0,s.jsx)("select",{...f("category"),className:"input-field",children:Object.entries(o.H).map(e=>{let[t,{label:i}]=e;return(0,s.jsx)("option",{value:t,children:i},t)})})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,s.jsx)("textarea",{...f("description"),rows:3,placeholder:"Optional description or notes about this subscription",className:"input-field"})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Website"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)("input",{type:"url",...f("website"),placeholder:"https://example.com",className:"input-field pl-10"})]}),j.website&&(0,s.jsxs)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),j.website.message]})]})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Pricing & Billing"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)("input",{type:"number",step:"0.01",min:"0",...f("price",{valueAsNumber:!0}),placeholder:"9.99",className:"input-field pl-10"})]}),j.price&&(0,s.jsxs)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),j.price.message]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Billing Cycle *"}),(0,s.jsx)("select",{...f("billingCycle"),className:"input-field",children:o.Z.map(e=>{let{value:t,label:i}=e;return(0,s.jsx)("option",{value:t,children:i},t)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Currency"}),(0,s.jsxs)("select",{...f("currency"),className:"input-field",children:[(0,s.jsx)("option",{value:"USD",children:"USD ($)"}),(0,s.jsx)("option",{value:"EUR",children:"EUR (â‚¬)"}),(0,s.jsx)("option",{value:"GBP",children:"GBP (\xa3)"}),(0,s.jsx)("option",{value:"CAD",children:"CAD (C$)"}),(0,s.jsx)("option",{value:"AUD",children:"AUD (A$)"})]})]})]}),D&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-primary-700 dark:text-primary-300",children:[(0,s.jsx)("strong",{children:"Monthly equivalent:"})," $",(()=>{if(!D)return 0;let e=o.Z.find(e=>e.value===S);return D*((null==e?void 0:e.multiplier)||1)})().toFixed(2)," per month"]})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Next Billing Date *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)("input",{type:"date",...f("nextBillingDate"),className:"input-field pl-10"})]}),j.nextBillingDate&&(0,s.jsxs)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),j.nextBillingDate.message]})]})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Additional Settings"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reminder (days before renewal)"}),(0,s.jsx)("input",{type:"number",min:"0",max:"30",...f("reminderDays",{valueAsNumber:!0}),className:"input-field"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",...f("tags"),placeholder:"work, personal, essential (comma-separated)",className:"input-field pl-10"})]})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",...f("isActive"),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"This subscription is currently active"})]})})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4",children:[i&&(0,s.jsx)("button",{type:"button",onClick:i,className:"btn-secondary",disabled:n,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:n,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Adding...":"Add Subscription"})]})]})}var b=i(32660),f=i(27648);function v(){return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)(f.default,{href:"/dashboard",className:"inline-flex items-center text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 mb-4",children:[(0,s.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Add New Subscription"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Track a new recurring payment to stay on top of your spending"})]}),(0,s.jsx)(y,{})]})}},74705:function(e,t,i){"use strict";i.d(t,{o:function(){return r}});class s{getSubscriptions(){try{let e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading subscriptions:",e),[]}}saveSubscriptions(e){try{localStorage.setItem(this.storageKey,JSON.stringify(e)),this.notifyListeners()}catch(e){console.error("Error saving subscriptions:",e)}}addSubscription(e){let t={...e,id:crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},i=this.getSubscriptions();return i.push(t),this.saveSubscriptions(i),t}updateSubscription(e,t){let i=this.getSubscriptions(),s=i.findIndex(t=>t.id===e);return -1===s?null:(i[s]={...i[s],...t,updatedAt:new Date().toISOString()},this.saveSubscriptions(i),i[s])}deleteSubscription(e){let t=this.getSubscriptions(),i=t.filter(t=>t.id!==e);return i.length!==t.length&&(this.saveSubscriptions(i),!0)}getStats(){let e=this.getSubscriptions().filter(e=>e.isActive),t=0,i=0,s={streaming:0,software:0,gaming:0,fitness:0,utilities:0,food:0,education:0,finance:0,productivity:0,entertainment:0,news:0,music:0,cloud_storage:0,communication:0,other:0};e.forEach(e=>{let r=this.getMonthlyAmount(e);t+=r,i+=12*r,s[e.category]+=r});let r=new Date;r.setDate(r.getDate()+7);let a=e.filter(e=>{let t=new Date(e.nextBillingDate);return t<=r&&t>=new Date}).length,l=this.generateMonthlyTrend(e);return{totalMonthly:t,totalYearly:i,activeCount:e.length,dueSoon:a,categoryBreakdown:s,monthlyTrend:l}}getMonthlyAmount(e){let{price:t,billingCycle:i}=e;switch(i){case"monthly":default:return t;case"yearly":return t/12;case"quarterly":return t/3;case"weekly":return 4.33*t;case"daily":return 30*t}}generateMonthlyTrend(e){let t=[],i=new Date;for(let s=11;s>=0;s--){let r=new Date(i.getFullYear(),i.getMonth()-s,1),a=r.toLocaleDateString("en-US",{month:"short",year:"2-digit"}),l=e.filter(e=>new Date(e.createdAt)<=r).reduce((e,t)=>e+this.getMonthlyAmount(t),0);t.push({month:a,amount:l})}return t}getUpcomingRenewals(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=this.getSubscriptions().filter(e=>e.isActive),i=new Date;return i.setDate(i.getDate()+e),t.filter(e=>{let t=new Date(e.nextBillingDate);return t<=i&&t>=new Date}).sort((e,t)=>new Date(e.nextBillingDate).getTime()-new Date(t.nextBillingDate).getTime())}searchSubscriptions(e,t){let i=this.getSubscriptions();if(e.trim()){let t=e.toLowerCase();i=i.filter(e=>{var i,s;return e.name.toLowerCase().includes(t)||(null===(i=e.description)||void 0===i?void 0:i.toLowerCase().includes(t))||(null===(s=e.tags)||void 0===s?void 0:s.some(e=>e.toLowerCase().includes(t)))})}return t&&(t.category&&(i=i.filter(e=>e.category===t.category)),void 0!==t.minPrice&&(i=i.filter(e=>this.getMonthlyAmount(e)>=t.minPrice)),void 0!==t.maxPrice&&(i=i.filter(e=>this.getMonthlyAmount(e)<=t.maxPrice)),void 0!==t.isActive&&(i=i.filter(e=>e.isActive===t.isActive))),i}bulkImport(e){let t=e.map(e=>({...e,id:crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})),i=[...this.getSubscriptions(),...t];return this.saveSubscriptions(i),t}exportData(){return JSON.stringify(this.getSubscriptions(),null,2)}clearAllData(){localStorage.removeItem(this.storageKey),this.notifyListeners()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>e())}constructor(){this.storageKey="subscriptions",this.listeners=new Set}}let r=new s},19533:function(e,t,i){"use strict";i.d(t,{H:function(){return s},Z:function(){return r}});let s={streaming:{label:"Streaming & Media",color:"#ef4444"},software:{label:"Software & Tools",color:"#3b82f6"},gaming:{label:"Gaming",color:"#8b5cf6"},fitness:{label:"Health & Fitness",color:"#10b981"},utilities:{label:"Utilities",color:"#f59e0b"},food:{label:"Food & Delivery",color:"#f97316"},education:{label:"Education",color:"#06b6d4"},finance:{label:"Finance & Banking",color:"#84cc16"},productivity:{label:"Productivity",color:"#6366f1"},entertainment:{label:"Entertainment",color:"#ec4899"},news:{label:"News & Media",color:"#64748b"},music:{label:"Music & Audio",color:"#14b8a6"},cloud_storage:{label:"Cloud Storage",color:"#a855f7"},communication:{label:"Communication",color:"#22c55e"},other:{label:"Other",color:"#6b7280"}},r=[{value:"monthly",label:"Monthly",multiplier:1},{value:"yearly",label:"Yearly",multiplier:1/12},{value:"quarterly",label:"Quarterly",multiplier:1/3},{value:"weekly",label:"Weekly",multiplier:4.33},{value:"daily",label:"Daily",multiplier:30}]}},function(e){e.O(0,[451,144,971,117,744],function(){return e(e.s=75386)}),_N_E=e.O()}]);